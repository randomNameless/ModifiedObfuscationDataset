<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>firebase-app.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABCAJgAABgAAF/AiQDA3loZARhZXlnAAEDaHdiBnl0YXVseAAAA3d3dQRra2xwAAADAgEABAUBcAAECQUDAQABBxECBm1lbW9yeQIABHZtaWwAAwkKAQBBAQsEAwABAgoeARwAAkADQEECEQEARQ0BQQQRAABBAxEAAAwACwsL';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABCAJgAABgAX8AAh8CA2x0YwhkbnphZ3VyegAAA3ZtYQhidWJrcXBiawAAAwIBAQQFAXAAAwgFAwEAAQcRAgZtZW1vcnkCAARzYWZ3AAIJCQEAQQELAwABAgoOAQwAIAAEQBAABRABCws=';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABBAFgAAACDwEDamZhB2diaXZrc2MAAAMCAQAEBQFwAAIHBQMBAAEHEQIGbWVtb3J5AgAEcXVtbAABCQgBAEEBCwIAAQoJAQcAQQERAAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEGxIeAgAChAX8AQQELfwBBBAt/AEEgC38AQTwLfwBByAALfwBB1AALfwBB2gALfwBB5AALfwBBoAELfwBBogELfwBBvAELfwBBvgELfwBB3AELfwBB6AELfwBB9AELfwBBgAILfwBBqgILfwBBtgILfwBBwgILfwBBzgILfwBB2AILfwBB4AILfwBBmgMLfwBBnAMLfwBBrAMLfwBBtAMLfwBBvAMLfwBBwgMLfwBB0gMLfwBB3AMLfwBB5gMLfwBB8AMLfwBB+AMLfwBBgAQLfwBBiAQLfwBBkgQLfwBBnAQLfwBBogQLfwBBqAQLfwBBrgQLfwBBtAQLfwBBvAQLfwBBxAQLfwBBzAQLfwBB1AQLfwBB3AQLfwBB5gQLfwBBrAULfwBBtAULfwBBvAULfwBBxgULfwBBzAULfwBB1gULfwBB3gULfwBB6AULfwBB8AULfwBB+gULfwBBggYLfwBBigYLfwBBlgYLfwBBogYLfwBBrAYLfwBBtAYLfwBBvAYLfwBBwgYLfwBB1AYLfwBB3AYLfwBB4gYLfwBB6gYLfwBB/AYLfwBBhgcLfwBBlgcLfwBBoAcLfwBBqAcLfwBBuAcLfwBBvgcLfwBBxgcLfwBBzgcLfwBB2gcLfwBB4gcLfwBB6AcLfwBB7gcLfwBB9gcLfwBB/gcLfwBBhggLfwBBiAgLfwBBlAgLfwBBnggLfwBBpAgLfwBBrggLfwBB9ggLfwBB/ggLfwBBxgkLfwBB4AkLfwBBgAoLfwBBmgoLfwBBugoLfwBB1AoLfwBB6AoLfwBBhAsLfwBBnAsLfwBBvAsLfwBB1gsLfwBB9gsLfwBBlAwLfwBBuAwLfwBB0gwLfwBB8gwLfwBBjg0LfwBBsA0LfwBBzg0LfwBB8g0LfwBBig4LfwBBqA4LfwBBwg4LfwBB4g4LfwBB7A4LfwBB9A4LfwBBhA8LfwBBkA8LfwBB2A8LfwBB+A8LfwBBwhALfwBB3hALfwBB5BALfwBB7hALfwBB9BALfwBB/BALfwBBihELfwBBkhELfwBBmhELfwBBqBELfwBBtBELfwBBxBELfwBBzBELfwBB0hELfwBB2BELfwBB4hELfwBB7BELfwBBghILfwBBoBILfwBBuhILfwBBxBILfwBBzhILfwBB2hILfwBB5BILfwBB6hILfwBB/BILfwBB/hILfwBBkBMLfwBBmhMLfwBBphMLfwBBsBMLfwBBuhMLfwBBxBMLfwBBxhMLfwBByBMLfwBB0hMLfwBB2hMLfwBB4BMLfwBB5hMLB4iMgIAAogEGbWVtb3J5AgAFZGF0YTADAAVkYXRhMQMBBWRhdGEyAwIFZGF0YTMDAwVkYXRhNAMEBWRhdGE1AwUFZGF0YTYDBgVkYXRhNwMHBWRhdGE4AwgFZGF0YTkDCQZkYXRhMTADCgZkYXRhMTEDCwZkYXRhMTIDDAZkYXRhMTMDDQZkYXRhMTQDDgZkYXRhMTUDDwZkYXRhMTYDEAZkYXRhMTcDEQZkYXRhMTgDEgZkYXRhMTkDEwZkYXRhMjADFAZkYXRhMjEDFQZkYXRhMjIDFgZkYXRhMjMDFwZkYXRhMjQDGAZkYXRhMjUDGQZkYXRhMjYDGgZkYXRhMjcDGwZkYXRhMjgDHAZkYXRhMjkDHQZkYXRhMzADHgZkYXRhMzEDHwZkYXRhMzIDIAZkYXRhMzMDIQZkYXRhMzQDIgZkYXRhMzUDIwZkYXRhMzYDJAZkYXRhMzcDJQZkYXRhMzgDJgZkYXRhMzkDJwZkYXRhNDADKAZkYXRhNDEDKQZkYXRhNDIDKgZkYXRhNDMDKwZkYXRhNDQDLAZkYXRhNDUDLQZkYXRhNDYDLgZkYXRhNDcDLwZkYXRhNDgDMAZkYXRhNDkDMQZkYXRhNTADMgZkYXRhNTEDMwZkYXRhNTIDNAZkYXRhNTMDNQZkYXRhNTQDNgZkYXRhNTUDNwZkYXRhNTYDOAZkYXRhNTcDOQZkYXRhNTgDOgZkYXRhNTkDOwZkYXRhNjADPAZkYXRhNjEDPQZkYXRhNjIDPgZkYXRhNjMDPwZkYXRhNjQDQAZkYXRhNjUDQQZkYXRhNjYDQgZkYXRhNjcDQwZkYXRhNjgDRAZkYXRhNjkDRQZkYXRhNzADRgZkYXRhNzEDRwZkYXRhNzIDSAZkYXRhNzMDSQZkYXRhNzQDSgZkYXRhNzUDSwZkYXRhNzYDTAZkYXRhNzcDTQZkYXRhNzgDTgZkYXRhNzkDTwZkYXRhODADUAZkYXRhODEDUQZkYXRhODIDUgZkYXRhODMDUwZkYXRhODQDVAZkYXRhODUDVQZkYXRhODYDVgZkYXRhODcDVwZkYXRhODgDWAZkYXRhODkDWQZkYXRhOTADWgZkYXRhOTEDWwZkYXRhOTIDXAZkYXRhOTMDXQZkYXRhOTQDXgZkYXRhOTUDXwZkYXRhOTYDYAZkYXRhOTcDYQZkYXRhOTgDYgZkYXRhOTkDYwdkYXRhMTAwA2QHZGF0YTEwMQNlB2RhdGExMDIDZgdkYXRhMTAzA2cHZGF0YTEwNANoB2RhdGExMDUDaQdkYXRhMTA2A2oHZGF0YTEwNwNrB2RhdGExMDgDbAdkYXRhMTA5A20HZGF0YTExMANuB2RhdGExMTEDbwdkYXRhMTEyA3AHZGF0YTExMwNxB2RhdGExMTQDcgdkYXRhMTE1A3MHZGF0YTExNgN0B2RhdGExMTcDdQdkYXRhMTE4A3YHZGF0YTExOQN3B2RhdGExMjADeAdkYXRhMTIxA3kHZGF0YTEyMgN6B2RhdGExMjMDewdkYXRhMTI0A3wHZGF0YTEyNQN9B2RhdGExMjYDfgdkYXRhMTI3A38HZGF0YTEyOAOAAQdkYXRhMTI5A4EBB2RhdGExMzADggEHZGF0YTEzMQODAQdkYXRhMTMyA4QBB2RhdGExMzMDhQEHZGF0YTEzNAOGAQdkYXRhMTM1A4cBB2RhdGExMzYDiAEHZGF0YTEzNwOJAQdkYXRhMTM4A4oBB2RhdGExMzkDiwEHZGF0YTE0MAOMAQdkYXRhMTQxA40BB2RhdGExNDIDjgEHZGF0YTE0MwOPAQdkYXRhMTQ0A5ABB2RhdGExNDUDkQEHZGF0YTE0NgOSAQdkYXRhMTQ3A5MBB2RhdGExNDgDlAEHZGF0YTE0OQOVAQdkYXRhMTUwA5YBB2RhdGExNTEDlwEHZGF0YTE1MgOYAQdkYXRhMTUzA5kBB2RhdGExNTQDmgEHZGF0YTE1NQObAQdkYXRhMTU2A5wBB2RhdGExNTcDnQEHZGF0YTE1OAOeAQdkYXRhMTU5A58BB2RhdGExNjADoAELuZmAgAChAQBBAQsBAABBBAsbQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVoAAEEgCxthYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5egAAQTwLCzAxMjM0NTY3ODkAAEHIAAsKJTJCJTJGJTNEAABB1AALBC1fLgAAQdoACwlmdW5jdGlvbgAAQeQACzplbmNvZGVCeXRlQXJyYXklMjB0YWtlcyUyMGFuJTIwYXJyYXklMjBhcyUyMGElMjBwYXJhbWV0ZXIAAEGgAQsBAABBogELGERlY29kZUJhc2U2NFN0cmluZ0Vycm9yAABBvAELAQAAQb4BCxxiYXNlNjREZWNvZGUlMjBmYWlsZWQlM0ElMjAAAEHcAQsKdW5kZWZpbmVkAABB6AELCnVuZGVmaW5lZAAAQfQBCwp1bmRlZmluZWQAAEGAAgsoVW5hYmxlJTIwdG8lMjBsb2NhdGUlMjBnbG9iYWwlMjBvYmplY3QuAABBqgILCnVuZGVmaW5lZAAAQbYCCwp1bmRlZmluZWQAAEHCAgsKdW5kZWZpbmVkAABBzgILCWZ1bmN0aW9uAABB2AILB29iamVjdAAAQeACCzh2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlAABBmgMLAQAAQZwDCw5GaXJlYmFzZUVycm9yAABBrAMLBkVycm9yAABBtAMLB29iamVjdAAAQbwDCwVMQVpZAABBwgMLDiU1QkRFRkFVTFQlNUQAAEHSAwsJSU5URVJOQUwAAEHcAwsIX2RlbGV0ZQAAQeYDCwlFWFBMSUNJVAAAQfADCwZFQUdFUgAAQfgDCwZERUJVRwAAQYAECwZERUJVRwAAQYgECwhWRVJCT1NFAABBkgQLCFZFUkJPU0UAAEGcBAsFSU5GTwAAQaIECwVJTkZPAABBqAQLBVdBUk4AAEGuBAsFV0FSTgAAQbQECwZFUlJPUgAAQbwECwZFUlJPUgAAQcQECwdTSUxFTlQAAEHMBAsHU0lMRU5UAABB1AQLB3N0cmluZwAAQdwECwlmdW5jdGlvbgAAQeYEC0RWYWx1ZSUyMGFzc2lnbmVkJTIwdG8lMjAlNjBsb2dIYW5kbGVyJTYwJTIwbXVzdCUyMGJlJTIwYSUyMGZ1bmN0aW9uAABBrAULB3N0cmluZwAAQbQFCwdudW1iZXIAAEG8BQsIYm9vbGVhbgAAQcYFCwQlMjAAAEHMBQsIc3VjY2VzcwAAQdYFCwZlcnJvcgAAQd4FCwhzdWNjZXNzAABB6AULBmVycm9yAABB8AULCWNvbXBsZXRlAABB+gULBmVycm9yAABBggYLBmFib3J0AABBigYLC0Fib3J0RXJyb3IAAEGWBgsLQWJvcnRFcnJvcgAAQaIGCwljb21wbGV0ZQAAQawGCwZlcnJvcgAAQbQGCwZhYm9ydAAAQbwGCwVkb25lAABBwgYLEW9iamVjdFN0b3JlTmFtZXMAAEHUBgsGc3RvcmUAAEHcBgsFZG9uZQAAQeIGCwZzdG9yZQAAQeoGCxFvYmplY3RTdG9yZU5hbWVzAABB/AYLCWZ1bmN0aW9uAABBhgcLDnVwZ3JhZGVuZWVkZWQAAEGWBwsIYmxvY2tlZAAAQaAHCwZjbG9zZQAAQagHCw52ZXJzaW9uY2hhbmdlAABBuAcLBGdldAAAQb4HCwdnZXRLZXkAAEHGBwsHZ2V0QWxsAABBzgcLC2dldEFsbEtleXMAAEHaBwsGY291bnQAAEHiBwsEcHV0AABB6AcLBGFkZAAAQe4HCwdkZWxldGUAAEH2BwsGY2xlYXIAAEH+BwsHc3RyaW5nAABBhggLAQAAQYgICwpyZWFkd3JpdGUAAEGUCAsJcmVhZG9ubHkAAEGeCAsEJTIwAABBpAgLCFZFUlNJT04AAEGuCAtGaHR0cHMlM0ElMkYlMkZ3d3cuZ3N0YXRpYy5jb20lMkZmaXJlYmFzZWpzJTJGMTAuOC4xJTJGZmlyZWJhc2UtYXBwLmpzAABB9ggLBzAuOS4yOAAAQf4IC0ZodHRwcyUzQSUyRiUyRnd3dy5nc3RhdGljLmNvbSUyRmZpcmViYXNlanMlMkYxMC44LjElMkZmaXJlYmFzZS1hcHAuanMAAEHGCQsZJTQwZmlyZWJhc2UlMkZhcHAtY29tcGF0AABB4AkLHyU0MGZpcmViYXNlJTJGYW5hbHl0aWNzLWNvbXBhdAAAQYAKCxglNDBmaXJlYmFzZSUyRmFuYWx5dGljcwAAQZoKCx8lNDBmaXJlYmFzZSUyRmFwcC1jaGVjay1jb21wYXQAAEG6CgsYJTQwZmlyZWJhc2UlMkZhcHAtY2hlY2sAAEHUCgsTJTQwZmlyZWJhc2UlMkZhdXRoAABB6AoLGiU0MGZpcmViYXNlJTJGYXV0aC1jb21wYXQAAEGECwsXJTQwZmlyZWJhc2UlMkZkYXRhYmFzZQAAQZwLCx4lNDBmaXJlYmFzZSUyRmRhdGFiYXNlLWNvbXBhdAAAQbwLCxglNDBmaXJlYmFzZSUyRmZ1bmN0aW9ucwAAQdYLCx8lNDBmaXJlYmFzZSUyRmZ1bmN0aW9ucy1jb21wYXQAAEH2CwscJTQwZmlyZWJhc2UlMkZpbnN0YWxsYXRpb25zAABBlAwLIyU0MGZpcmViYXNlJTJGaW5zdGFsbGF0aW9ucy1jb21wYXQAAEG4DAsYJTQwZmlyZWJhc2UlMkZtZXNzYWdpbmcAAEHSDAsfJTQwZmlyZWJhc2UlMkZtZXNzYWdpbmctY29tcGF0AABB8gwLGiU0MGZpcmViYXNlJTJGcGVyZm9ybWFuY2UAAEGODQshJTQwZmlyZWJhc2UlMkZwZXJmb3JtYW5jZS1jb21wYXQAAEGwDQscJTQwZmlyZWJhc2UlMkZyZW1vdGUtY29uZmlnAABBzg0LIyU0MGZpcmViYXNlJTJGcmVtb3RlLWNvbmZpZy1jb21wYXQAAEHyDQsWJTQwZmlyZWJhc2UlMkZzdG9yYWdlAABBig4LHSU0MGZpcmViYXNlJTJGc3RvcmFnZS1jb21wYXQAAEGoDgsYJTQwZmlyZWJhc2UlMkZmaXJlc3RvcmUAAEHCDgsfJTQwZmlyZWJhc2UlMkZmaXJlc3RvcmUtY29tcGF0AABB4g4LCWZpcmViYXNlAABB7A4LBzEwLjguMQAAQfQOCw4lNUJERUZBVUxUJTVEAABBhA8LCmhlYXJ0YmVhdAAAQZAPC0dObyUyMEZpcmViYXNlJTIwQXBwJTIwJyU3QiUyNGFwcE5hbWUlN0QnJTIwaGFzJTIwYmVlbiUyMGNyZWF0ZWQlMjAtJTIwAABB2A8LH2NhbGwlMjBpbml0aWFsaXplQXBwKCklMjBmaXJzdAAAQfgPC0lmaXJlYmFzZS4lN0IlMjRhcHBOYW1lJTdEKCklMjB0YWtlcyUyMGVpdGhlciUyMG5vJTIwYXJndW1lbnQlMjBvciUyMGElMjAAAEHCEAsbRmlyZWJhc2UlMjBBcHAlMjBpbnN0YW5jZS4AAEHeEAsEYXBwAABB5BALCUZpcmViYXNlAABB7hALBGFwcAAAQfQQCwdQVUJMSUMAAEH8EAsMYXBwLWRlbGV0ZWQAAEGKEQsHb2JqZWN0AABBkhELB3N0cmluZwAAQZoRCw1iYWQtYXBwLW5hbWUAAEGoEQsLbm8tb3B0aW9ucwAAQbQRCw5kdXBsaWNhdGUtYXBwAABBxBELB25vLWFwcAAAQcwRCwRhbmQAAEHSEQsEJTIwAABB2BELCFZFUlNJT04AAEHiEQsJZnVuY3Rpb24AAEHsEQsVaW52YWxpZC1sb2ctYXJndW1lbnQAAEGCEgscZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlAABBoBILGWZpcmViYXNlLWhlYXJ0YmVhdC1zdG9yZQAAQboSCwlpZGItb3BlbgAAQcQSCwhpZGItZ2V0AABBzhILCnJlYWR3cml0ZQAAQdoSCwhpZGItc2V0AABB5BILBGFwcAAAQeoSCxBwbGF0Zm9ybS1sb2dnZXIAAEH8EgsBAABB/hILEHBsYXRmb3JtLWxvZ2dlcgAAQZATCwhQUklWQVRFAABBmhMLCmhlYXJ0YmVhdAAAQaYTCwhQUklWQVRFAABBsBMLCGVzbTIwMTcAAEG6EwsIZmlyZS1qcwAAQcQTCwEAAEHGEwsBAABByBMLCWZpcmViYXNlAABB0hMLBzEwLjguMQAAQdoTCwRjZG4AAEHgEwsFYnRvYQAAQeYTCwVhdG9iAA=='].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
const stringToByteArray$1 = function (str) {
    const out = [];
    let p = 0;
    (() => {
        let i = 0;
        const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < str.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        let c = str.charCodeAt(i);
                        (() => {
                            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            out[p++] = c;
                                        }
                                    },
                                    impFunc2: () => {
                                        (() => {
                                            const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                                                env: {
                                                    impFunc1: () => {
                                                        {
                                                            out[p++] = c >> 6 | 192;
                                                            out[p++] = c & 63 | 128;
                                                        }
                                                    },
                                                    impFunc2: () => {
                                                        (() => {
                                                            const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                                                                env: {
                                                                    impFunc1: () => {
                                                                        {
                                                                            c = 65536 + ((c & 1023) << 10) + (str.charCodeAt(++i) & 1023);
                                                                            out[p++] = c >> 18 | 240;
                                                                            out[p++] = c >> 12 & 63 | 128;
                                                                            out[p++] = c >> 6 & 63 | 128;
                                                                            out[p++] = c & 63 | 128;
                                                                        }
                                                                    },
                                                                    impFunc2: () => {
                                                                        {
                                                                            out[p++] = c >> 12 | 224;
                                                                            out[p++] = c >> 6 & 63 | 128;
                                                                            out[p++] = c & 63 | 128;
                                                                        }
                                                                    }
                                                                }
                                                            });
                                                            const __exports = __ifInstance2.exports;
                                                            return __exports.data((c & 64512) === 55296 && i + 1 < str.length && (str.charCodeAt(i + 1) & 64512) === 56320 ? 1 : 0);
                                                        })();
                                                    }
                                                }
                                            });
                                            const __exports = __ifInstance1.exports;
                                            return __exports.data(c < 2048 ? 1 : 0);
                                        })();
                                    }
                                }
                            });
                            const __exports = __ifInstance0.exports;
                            return __exports.data(c < 128 ? 1 : 0);
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance0.exports;
        return __exports.data();
    })();
    return out;
};
const byteArrayToString = function (bytes) {
    const out = [];
    let pos = 0, c = 0;
    (() => {
        const __forInstance3 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return pos < bytes.length ? 1 : 0;
                },
                update: () => {
                },
                body: () => {
                    {
                        const c1 = bytes[pos++];
                        (() => {
                            const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            out[c++] = String.fromCharCode(c1);
                                        }
                                    },
                                    impFunc2: () => {
                                        (() => {
                                            const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                                                env: {
                                                    impFunc1: () => {
                                                        {
                                                            const c2 = bytes[pos++];
                                                            out[c++] = String.fromCharCode((c1 & 31) << 6 | c2 & 63);
                                                        }
                                                    },
                                                    impFunc2: () => {
                                                        (() => {
                                                            const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                                                                env: {
                                                                    impFunc1: () => {
                                                                        {
                                                                            const c2 = bytes[pos++];
                                                                            const c3 = bytes[pos++];
                                                                            const c4 = bytes[pos++];
                                                                            const u = ((c1 & 7) << 18 | (c2 & 63) << 12 | (c3 & 63) << 6 | c4 & 63) - 65536;
                                                                            out[c++] = String.fromCharCode(55296 + (u >> 10));
                                                                            out[c++] = String.fromCharCode(56320 + (u & 1023));
                                                                        }
                                                                    },
                                                                    impFunc2: () => {
                                                                        {
                                                                            const c2 = bytes[pos++];
                                                                            const c3 = bytes[pos++];
                                                                            out[c++] = String.fromCharCode((c1 & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
                                                                        }
                                                                    }
                                                                }
                                                            });
                                                            const __exports = __ifInstance5.exports;
                                                            return __exports.data(c1 > 239 && c1 < 365 ? 1 : 0);
                                                        })();
                                                    }
                                                }
                                            });
                                            const __exports = __ifInstance4.exports;
                                            return __exports.data(c1 > 191 && c1 < 224 ? 1 : 0);
                                        })();
                                    }
                                }
                            });
                            const __exports = __ifInstance3.exports;
                            return __exports.data(c1 < 128 ? 1 : 0);
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance3.exports;
        return __exports.data();
    })();
    return out.join(lS(0, 0));
};
const base64 = {
    byteToCharMap_: null,
    charToByteMap_: null,
    byteToCharMapWebSafe_: null,
    charToByteMapWebSafe_: null,
    ENCODED_VALS_BASE: lS(0, 1) + lS(0, 2) + lS(0, 3),
    get ENCODED_VALS() {
        return this.ENCODED_VALS_BASE + lS(0, 4);
    },
    get ENCODED_VALS_WEBSAFE() {
        return this.ENCODED_VALS_BASE + lS(0, 5);
    },
    HAS_NATIVE_SUPPORT: typeof atob === lS(0, 6),
    encodeByteArray(input, webSafe) {
        if (!Array.isArray(input)) {
            throw Error(lS(0, 7));
        }
        (() => {
            const __callInstance130 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.init_();
                    }
                }
            });
            const __exports = __callInstance130.exports;
            return __exports.data();
        })();
        const byteToCharMap = webSafe ? this.byteToCharMapWebSafe_ : this.byteToCharMap_;
        const output = [];
        (() => {
            let i = 0;
            const __forInstance1 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < input.length ? 1 : 0;
                    },
                    update: () => {
                        i += 3;
                    },
                    body: () => {
                        {
                            const byte1 = input[i];
                            const haveByte2 = i + 1 < input.length;
                            const byte2 = haveByte2 ? input[i + 1] : 0;
                            const haveByte3 = i + 2 < input.length;
                            const byte3 = haveByte3 ? input[i + 2] : 0;
                            const outByte1 = byte1 >> 2;
                            const outByte2 = (byte1 & 3) << 4 | byte2 >> 4;
                            let outByte3 = (byte2 & 15) << 2 | byte3 >> 6;
                            let outByte4 = byte3 & 63;
                            (() => {
                                const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                outByte4 = 64;
                                                (() => {
                                                    const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    outByte3 = 64;
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance7.exports;
                                                    return __exports.data(!haveByte2 ? 1 : 0);
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance6.exports;
                                return __exports.data(!haveByte3 ? 1 : 0);
                            })();
                            (() => {
                                const __callInstance129 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);
                                        }
                                    }
                                });
                                const __exports = __callInstance129.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance1.exports;
            return __exports.data();
        })();
        return output.join(lS(0, 8));
    },
    encodeString(input, webSafe) {
        if (this.HAS_NATIVE_SUPPORT && !webSafe) {
            return window[lS(0, 159, true)](input);
        }
        return this.encodeByteArray(stringToByteArray$1(input), webSafe);
    },
    decodeString(input, webSafe) {
        if (this.HAS_NATIVE_SUPPORT && !webSafe) {
            return window[lS(0, 160, true)](input);
        }
        return byteArrayToString(this.decodeStringToByteArray(input, webSafe));
    },
    decodeStringToByteArray(input, webSafe) {
        (() => {
            const __callInstance128 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.init_();
                    }
                }
            });
            const __exports = __callInstance128.exports;
            return __exports.data();
        })();
        const charToByteMap = webSafe ? this.charToByteMapWebSafe_ : this.charToByteMap_;
        const output = [];
        for (let i = 0; i < input.length;) {
            const byte1 = charToByteMap[input.charAt(i++)];
            const haveByte2 = i < input.length;
            const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;
            ++i;
            const haveByte3 = i < input.length;
            const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;
            ++i;
            const haveByte4 = i < input.length;
            const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;
            ++i;
            if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {
                throw new DecodeBase64StringError();
            }
            const outByte1 = byte1 << 2 | byte2 >> 4;
            (() => {
                const __callInstance127 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            output.push(outByte1);
                        }
                    }
                });
                const __exports = __callInstance127.exports;
                return __exports.data();
            })();
            (() => {
                const __ifInstance8 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                const outByte2 = byte2 << 4 & 240 | byte3 >> 2;
                                (() => {
                                    const __callInstance126 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                output.push(outByte2);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance126.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __ifInstance9 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    const outByte3 = byte3 << 6 & 192 | byte4;
                                                    (() => {
                                                        const __callInstance125 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    output.push(outByte3);
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance125.exports;
                                                        return __exports.data();
                                                    })();
                                                }
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance9.exports;
                                    return __exports.data(byte4 !== 64 ? 1 : 0);
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance8.exports;
                return __exports.data(byte3 !== 64 ? 1 : 0);
            })();
        }
        return output;
    },
    init_() {
        (() => {
            const __ifInstance10 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            this.byteToCharMap_ = {};
                            this.charToByteMap_ = {};
                            this.byteToCharMapWebSafe_ = {};
                            this.charToByteMapWebSafe_ = {};
                            (() => {
                                let i = 0;
                                const __forInstance2 = new WebAssembly.Instance(__forWasmModule, {
                                    env: {
                                        test: () => {
                                            return i < this.ENCODED_VALS.length ? 1 : 0;
                                        },
                                        update: () => {
                                            i++;
                                        },
                                        body: () => {
                                            {
                                                this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);
                                                this.charToByteMap_[this.byteToCharMap_[i]] = i;
                                                this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);
                                                this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;
                                                (() => {
                                                    const __ifInstance11 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;
                                                                    this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance11.exports;
                                                    return __exports.data(i >= this.ENCODED_VALS_BASE.length ? 1 : 0);
                                                })();
                                            }
                                        }
                                    }
                                });
                                const __exports = __forInstance2.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance10.exports;
            return __exports.data(!this.byteToCharMap_ ? 1 : 0);
        })();
    }
};
class DecodeBase64StringError extends Error {
    constructor() {
        (() => {
            const __callInstance124 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        super(...arguments);
                    }
                }
            });
            const __exports = __callInstance124.exports;
            return __exports.data();
        })();
        this.name = lS(0, 9);
    }
}
const base64Encode = function (str) {
    const utf8Bytes = stringToByteArray$1(str);
    return base64.encodeByteArray(utf8Bytes, true);
};
const base64urlEncodeWithoutPadding = function (str) {
    return base64Encode(str).replace(/\./g, lS(0, 10));
};
const base64Decode = function (str) {
    try {
        return base64.decodeString(str, true);
    } catch (e) {
        (() => {
            const __callInstance123 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        console.error(lS(0, 11), e);
                    }
                }
            });
            const __exports = __callInstance123.exports;
            return __exports.data();
        })();
    }
    return null;
};
function getGlobal() {
    if (typeof self !== lS(0, 12)) {
        return self;
    }
    if (typeof window !== lS(0, 13)) {
        return window;
    }
    if (typeof global !== lS(0, 14)) {
        return global;
    }
    throw new Error(lS(0, 15));
}
const getDefaultsFromGlobal = () => getGlobal().__FIREBASE_DEFAULTS__;
const getDefaultsFromEnvVariable = () => {
    if (typeof process === lS(0, 16) || typeof process.env === lS(0, 17)) {
        return;
    }
    const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;
    if (defaultsJsonString) {
        return JSON.parse(defaultsJsonString);
    }
};
const getDefaultsFromCookie = () => {
    if (typeof document === lS(0, 18)) {
        return;
    }
    let match;
    try {
        match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);
    } catch (e) {
        return;
    }
    const decoded = match && base64Decode(match[1]);
    return decoded && JSON.parse(decoded);
};
const getDefaults = () => {
    try {
        return getDefaultsFromGlobal() || getDefaultsFromEnvVariable() || getDefaultsFromCookie();
    } catch (e) {
        (() => {
            const __callInstance122 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ e }`);
                    }
                }
            });
            const __exports = __callInstance122.exports;
            return __exports.data();
        })();
        return;
    }
};
const getDefaultAppConfig = () => {
    var _a;
    return (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.config;
};
class Deferred {
    constructor() {
        this.reject = () => {
        };
        this.resolve = () => {
        };
        this.promise = new Promise((resolve, reject) => {
            this.resolve = resolve;
            this.reject = reject;
        });
    }
    wrapCallback(callback) {
        return (error, value) => {
            (() => {
                const __ifInstance12 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance121 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                this.reject(error);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance121.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                            {
                                (() => {
                                    const __callInstance120 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                this.resolve(value);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance120.exports;
                                    return __exports.data();
                                })();
                            }
                        }
                    }
                });
                const __exports = __ifInstance12.exports;
                return __exports.data(error ? 1 : 0);
            })();
            (() => {
                const __ifInstance13 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance119 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                this.promise.catch(() => {
                                                });
                                            }
                                        }
                                    });
                                    const __exports = __callInstance119.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __ifInstance14 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    (() => {
                                                        const __callInstance118 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    callback(error);
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance118.exports;
                                                        return __exports.data();
                                                    })();
                                                }
                                            },
                                            impFunc2: () => {
                                                {
                                                    (() => {
                                                        const __callInstance117 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    callback(error, value);
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance117.exports;
                                                        return __exports.data();
                                                    })();
                                                }
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance14.exports;
                                    return __exports.data(callback.length === 1 ? 1 : 0);
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance13.exports;
                return __exports.data(typeof callback === lS(0, 19) ? 1 : 0);
            })();
        };
    }
}
function isIndexedDBAvailable() {
    try {
        return typeof indexedDB === lS(0, 20);
    } catch (e) {
        return false;
    }
}
function validateIndexedDBOpenable() {
    return new Promise((resolve, reject) => {
        try {
            let preExist = true;
            const DB_CHECK_NAME = lS(0, 21);
            const request = self.indexedDB.open(DB_CHECK_NAME);
            request.onsuccess = () => {
                (() => {
                    const __callInstance116 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                request.result.close();
                            }
                        }
                    });
                    const __exports = __callInstance116.exports;
                    return __exports.data();
                })();
                (() => {
                    const __ifInstance15 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    (() => {
                                        const __callInstance115 = new WebAssembly.Instance(__callWasmModule, {
                                            env: {
                                                impFunc: () => {
                                                    self.indexedDB.deleteDatabase(DB_CHECK_NAME);
                                                }
                                            }
                                        });
                                        const __exports = __callInstance115.exports;
                                        return __exports.data();
                                    })();
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance15.exports;
                    return __exports.data(!preExist ? 1 : 0);
                })();
                (() => {
                    const __callInstance114 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                resolve(true);
                            }
                        }
                    });
                    const __exports = __callInstance114.exports;
                    return __exports.data();
                })();
            };
            request.onupgradeneeded = () => {
                preExist = false;
            };
            request.onerror = () => {
                var _a;
                (() => {
                    const __callInstance113 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                reject(((_a = request.error) === null || _a === void 0 ? void 0 : _a.message) || lS(0, 22));
                            }
                        }
                    });
                    const __exports = __callInstance113.exports;
                    return __exports.data();
                })();
            };
        } catch (error) {
            (() => {
                const __callInstance112 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            reject(error);
                        }
                    }
                });
                const __exports = __callInstance112.exports;
                return __exports.data();
            })();
        }
    });
}
const ERROR_NAME = lS(0, 23);
class FirebaseError extends Error {
    constructor(code, message, customData) {
        (() => {
            const __callInstance111 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        super(message);
                    }
                }
            });
            const __exports = __callInstance111.exports;
            return __exports.data();
        })();
        this.code = code;
        this.customData = customData;
        this.name = ERROR_NAME;
        (() => {
            const __callInstance110 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        Object.setPrototypeOf(this, FirebaseError.prototype);
                    }
                }
            });
            const __exports = __callInstance110.exports;
            return __exports.data();
        })();
        (() => {
            const __ifInstance16 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance109 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            Error.captureStackTrace(this, ErrorFactory.prototype.create);
                                        }
                                    }
                                });
                                const __exports = __callInstance109.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance16.exports;
            return __exports.data(Error.captureStackTrace ? 1 : 0);
        })();
    }
}
class ErrorFactory {
    constructor(service, serviceName, errors) {
        this.service = service;
        this.serviceName = serviceName;
        this.errors = errors;
    }
    create(code, ...data) {
        const customData = data[0] || {};
        const fullCode = `${ this.service }/${ code }`;
        const template = this.errors[code];
        const message = template ? replaceTemplate(template, customData) : lS(0, 24);
        const fullMessage = `${ this.serviceName }: ${ message } (${ fullCode }).`;
        const error = new FirebaseError(fullCode, fullMessage, customData);
        return error;
    }
}
function replaceTemplate(template, data) {
    return template.replace(PATTERN, (_, key) => {
        const value = data[key];
        return value != null ? String(value) : `<${ key }?>`;
    });
}
const PATTERN = /\{\$([^}]+)}/g;
function deepEqual(a, b) {
    if (a === b) {
        return true;
    }
    const aKeys = Object.keys(a);
    const bKeys = Object.keys(b);
    for (const k of aKeys) {
        if (!bKeys.includes(k)) {
            return false;
        }
        const aProp = a[k];
        const bProp = b[k];
        if (isObject(aProp) && isObject(bProp)) {
            if (!deepEqual(aProp, bProp)) {
                return false;
            }
        } else if (aProp !== bProp) {
            return false;
        }
    }
    for (const k of bKeys) {
        if (!aKeys.includes(k)) {
            return false;
        }
    }
    return true;
}
function isObject(thing) {
    return thing !== null && typeof thing === lS(0, 25);
}
class Component {
    constructor(name, instanceFactory, type) {
        this.name = name;
        this.instanceFactory = instanceFactory;
        this.type = type;
        this.multipleInstances = false;
        this.serviceProps = {};
        this.instantiationMode = lS(0, 26);
        this.onInstanceCreated = null;
    }
    setInstantiationMode(mode) {
        this.instantiationMode = mode;
        return this;
    }
    setMultipleInstances(multipleInstances) {
        this.multipleInstances = multipleInstances;
        return this;
    }
    setServiceProps(props) {
        this.serviceProps = props;
        return this;
    }
    setInstanceCreatedCallback(callback) {
        this.onInstanceCreated = callback;
        return this;
    }
}
const DEFAULT_ENTRY_NAME$1 = lS(0, 27);
class Provider {
    constructor(name, container) {
        this.name = name;
        this.container = container;
        this.component = null;
        this.instances = new Map();
        this.instancesDeferred = new Map();
        this.instancesOptions = new Map();
        this.onInitCallbacks = new Map();
    }
    get(identifier) {
        const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);
        (() => {
            const __ifInstance17 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            const deferred = new Deferred();
                            (() => {
                                const __callInstance108 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.instancesDeferred.set(normalizedIdentifier, deferred);
                                        }
                                    }
                                });
                                const __exports = __callInstance108.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __ifInstance18 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                try {
                                                    const instance = this.getOrInitializeService({ instanceIdentifier: normalizedIdentifier });
                                                    (() => {
                                                        const __ifInstance19 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        (() => {
                                                                            const __callInstance107 = new WebAssembly.Instance(__callWasmModule, {
                                                                                env: {
                                                                                    impFunc: () => {
                                                                                        deferred.resolve(instance);
                                                                                    }
                                                                                }
                                                                            });
                                                                            const __exports = __callInstance107.exports;
                                                                            return __exports.data();
                                                                        })();
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance19.exports;
                                                        return __exports.data(instance ? 1 : 0);
                                                    })();
                                                } catch (e) {
                                                }
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance18.exports;
                                return __exports.data(this.isInitialized(normalizedIdentifier) || this.shouldAutoInitialize() ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance17.exports;
            return __exports.data(!this.instancesDeferred.has(normalizedIdentifier) ? 1 : 0);
        })();
        return this.instancesDeferred.get(normalizedIdentifier).promise;
    }
    getImmediate(options) {
        var _a;
        const normalizedIdentifier = this.normalizeInstanceIdentifier(options === null || options === void 0 ? void 0 : options.identifier);
        const optional = (_a = options === null || options === void 0 ? void 0 : options.optional) !== null && _a !== void 0 ? _a : false;
        if (this.isInitialized(normalizedIdentifier) || this.shouldAutoInitialize()) {
            try {
                return this.getOrInitializeService({ instanceIdentifier: normalizedIdentifier });
            } catch (e) {
                if (optional) {
                    return null;
                } else {
                    throw e;
                }
            }
        } else {
            if (optional) {
                return null;
            } else {
                throw Error(`Service ${ this.name } is not available`);
            }
        }
    }
    getComponent() {
        return this.component;
    }
    setComponent(component) {
        if (component.name !== this.name) {
            throw Error(`Mismatching Component ${ component.name } for Provider ${ this.name }.`);
        }
        if (this.component) {
            throw Error(`Component for ${ this.name } has already been provided`);
        }
        this.component = component;
        if (!this.shouldAutoInitialize()) {
            return;
        }
        (() => {
            const __ifInstance20 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            try {
                                (() => {
                                    const __callInstance106 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME$1 });
                                            }
                                        }
                                    });
                                    const __exports = __callInstance106.exports;
                                    return __exports.data();
                                })();
                            } catch (e) {
                            }
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance20.exports;
            return __exports.data(isComponentEager(component) ? 1 : 0);
        })();
        for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {
            const normalizedIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);
            try {
                const instance = this.getOrInitializeService({ instanceIdentifier: normalizedIdentifier });
                (() => {
                    const __callInstance105 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                instanceDeferred.resolve(instance);
                            }
                        }
                    });
                    const __exports = __callInstance105.exports;
                    return __exports.data();
                })();
            } catch (e) {
            }
        }
    }
    clearInstance(identifier = DEFAULT_ENTRY_NAME$1) {
        (() => {
            const __callInstance104 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.instancesDeferred.delete(identifier);
                    }
                }
            });
            const __exports = __callInstance104.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance103 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.instancesOptions.delete(identifier);
                    }
                }
            });
            const __exports = __callInstance103.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance102 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.instances.delete(identifier);
                    }
                }
            });
            const __exports = __callInstance102.exports;
            return __exports.data();
        })();
    }
    async delete() {
        const services = Array.from(this.instances.values());
        await Promise.all([
            ...services.filter(service => lS(0, 28) in service).map(service => service.INTERNAL.delete()),
            ...services.filter(service => lS(0, 29) in service).map(service => service._delete())
        ]);
    }
    isComponentSet() {
        return this.component != null;
    }
    isInitialized(identifier = DEFAULT_ENTRY_NAME$1) {
        return this.instances.has(identifier);
    }
    getOptions(identifier = DEFAULT_ENTRY_NAME$1) {
        return this.instancesOptions.get(identifier) || {};
    }
    initialize(opts = {}) {
        const {
            options = {}
        } = opts;
        const normalizedIdentifier = this.normalizeInstanceIdentifier(opts.instanceIdentifier);
        if (this.isInitialized(normalizedIdentifier)) {
            throw Error(`${ this.name }(${ normalizedIdentifier }) has already been initialized`);
        }
        if (!this.isComponentSet()) {
            throw Error(`Component ${ this.name } has not been registered yet`);
        }
        const instance = this.getOrInitializeService({
            instanceIdentifier: normalizedIdentifier,
            options
        });
        for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {
            const normalizedDeferredIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);
            (() => {
                const __ifInstance21 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance101 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                instanceDeferred.resolve(instance);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance101.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance21.exports;
                return __exports.data(normalizedIdentifier === normalizedDeferredIdentifier ? 1 : 0);
            })();
        }
        return instance;
    }
    onInit(callback, identifier) {
        var _a;
        const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);
        const existingCallbacks = (_a = this.onInitCallbacks.get(normalizedIdentifier)) !== null && _a !== void 0 ? _a : new Set();
        (() => {
            const __callInstance100 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        existingCallbacks.add(callback);
                    }
                }
            });
            const __exports = __callInstance100.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance99 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);
                    }
                }
            });
            const __exports = __callInstance99.exports;
            return __exports.data();
        })();
        const existingInstance = this.instances.get(normalizedIdentifier);
        (() => {
            const __ifInstance22 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance98 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            callback(existingInstance, normalizedIdentifier);
                                        }
                                    }
                                });
                                const __exports = __callInstance98.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance22.exports;
            return __exports.data(existingInstance ? 1 : 0);
        })();
        return () => {
            (() => {
                const __callInstance97 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            existingCallbacks.delete(callback);
                        }
                    }
                });
                const __exports = __callInstance97.exports;
                return __exports.data();
            })();
        };
    }
    invokeOnInitCallbacks(instance, identifier) {
        const callbacks = this.onInitCallbacks.get(identifier);
        if (!callbacks) {
            return;
        }
        for (const callback of callbacks) {
            try {
                (() => {
                    const __callInstance96 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                callback(instance, identifier);
                            }
                        }
                    });
                    const __exports = __callInstance96.exports;
                    return __exports.data();
                })();
            } catch (_a) {
            }
        }
    }
    getOrInitializeService({instanceIdentifier, options = {}}) {
        let instance = this.instances.get(instanceIdentifier);
        (() => {
            const __ifInstance23 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            instance = this.component.instanceFactory(this.container, {
                                instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),
                                options
                            });
                            (() => {
                                const __callInstance95 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.instances.set(instanceIdentifier, instance);
                                        }
                                    }
                                });
                                const __exports = __callInstance95.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance94 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.instancesOptions.set(instanceIdentifier, options);
                                        }
                                    }
                                });
                                const __exports = __callInstance94.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance93 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.invokeOnInitCallbacks(instance, instanceIdentifier);
                                        }
                                    }
                                });
                                const __exports = __callInstance93.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __ifInstance24 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                try {
                                                    (() => {
                                                        const __callInstance92 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    this.component.onInstanceCreated(this.container, instanceIdentifier, instance);
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance92.exports;
                                                        return __exports.data();
                                                    })();
                                                } catch (_a) {
                                                }
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance24.exports;
                                return __exports.data(this.component.onInstanceCreated ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance23.exports;
            return __exports.data(!instance && this.component ? 1 : 0);
        })();
        return instance || null;
    }
    normalizeInstanceIdentifier(identifier = DEFAULT_ENTRY_NAME$1) {
        if (this.component) {
            return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME$1;
        } else {
            return identifier;
        }
    }
    shouldAutoInitialize() {
        return !!this.component && this.component.instantiationMode !== lS(0, 30);
    }
}
function normalizeIdentifierForFactory(identifier) {
    return identifier === DEFAULT_ENTRY_NAME$1 ? undefined : identifier;
}
function isComponentEager(component) {
    return component.instantiationMode === lS(0, 31);
}
class ComponentContainer {
    constructor(name) {
        this.name = name;
        this.providers = new Map();
    }
    addComponent(component) {
        const provider = this.getProvider(component.name);
        if (provider.isComponentSet()) {
            throw new Error(`Component ${ component.name } has already been registered with ${ this.name }`);
        }
        (() => {
            const __callInstance91 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        provider.setComponent(component);
                    }
                }
            });
            const __exports = __callInstance91.exports;
            return __exports.data();
        })();
    }
    addOrOverwriteComponent(component) {
        const provider = this.getProvider(component.name);
        (() => {
            const __ifInstance25 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance90 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.providers.delete(component.name);
                                        }
                                    }
                                });
                                const __exports = __callInstance90.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance25.exports;
            return __exports.data(provider.isComponentSet() ? 1 : 0);
        })();
        (() => {
            const __callInstance89 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.addComponent(component);
                    }
                }
            });
            const __exports = __callInstance89.exports;
            return __exports.data();
        })();
    }
    getProvider(name) {
        if (this.providers.has(name)) {
            return this.providers.get(name);
        }
        const provider = new Provider(name, this);
        (() => {
            const __callInstance88 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.providers.set(name, provider);
                    }
                }
            });
            const __exports = __callInstance88.exports;
            return __exports.data();
        })();
        return provider;
    }
    getProviders() {
        return Array.from(this.providers.values());
    }
}
const instances = [];
var LogLevel;
(() => {
    const __callInstance87 = new WebAssembly.Instance(__callWasmModule, {
        env: {
            impFunc: () => {
                (function (LogLevel) {
                    LogLevel[LogLevel[lS(0, 32)] = 0] = lS(0, 33);
                    LogLevel[LogLevel[lS(0, 34)] = 1] = lS(0, 35);
                    LogLevel[LogLevel[lS(0, 36)] = 2] = lS(0, 37);
                    LogLevel[LogLevel[lS(0, 38)] = 3] = lS(0, 39);
                    LogLevel[LogLevel[lS(0, 40)] = 4] = lS(0, 41);
                    LogLevel[LogLevel[lS(0, 42)] = 5] = lS(0, 43);
                }(LogLevel || (LogLevel = {})));
            }
        }
    });
    const __exports = __callInstance87.exports;
    return __exports.data();
})();
const levelStringToEnum = {
    'debug': LogLevel.DEBUG,
    'verbose': LogLevel.VERBOSE,
    'info': LogLevel.INFO,
    'warn': LogLevel.WARN,
    'error': LogLevel.ERROR,
    'silent': LogLevel.SILENT
};
const defaultLogLevel = LogLevel.INFO;
const ConsoleMethod = {
    [LogLevel.DEBUG]: 'log',
    [LogLevel.VERBOSE]: 'log',
    [LogLevel.INFO]: 'info',
    [LogLevel.WARN]: 'warn',
    [LogLevel.ERROR]: 'error'
};
const defaultLogHandler = (instance, logType, ...args) => {
    if (logType < instance.logLevel) {
        return;
    }
    const now = new Date().toISOString();
    const method = ConsoleMethod[logType];
    if (method) {
        (() => {
            const __callInstance86 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        console[method](`[${ now }]  ${ instance.name }:`, ...args);
                    }
                }
            });
            const __exports = __callInstance86.exports;
            return __exports.data();
        })();
    } else {
        throw new Error(`Attempted to log a message with an invalid logType (value: ${ logType })`);
    }
};
class Logger {
    constructor(name) {
        this.name = name;
        this._logLevel = defaultLogLevel;
        this._logHandler = defaultLogHandler;
        this._userLogHandler = null;
        (() => {
            const __callInstance85 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        instances.push(this);
                    }
                }
            });
            const __exports = __callInstance85.exports;
            return __exports.data();
        })();
    }
    get logLevel() {
        return this._logLevel;
    }
    set logLevel(val) {
        if (!(val in LogLevel)) {
            throw new TypeError(`Invalid value "${ val }" assigned to \`logLevel\``);
        }
        this._logLevel = val;
    }
    setLogLevel(val) {
        this._logLevel = typeof val === lS(0, 44) ? levelStringToEnum[val] : val;
    }
    get logHandler() {
        return this._logHandler;
    }
    set logHandler(val) {
        if (typeof val !== lS(0, 45)) {
            throw new TypeError(lS(0, 46));
        }
        this._logHandler = val;
    }
    get userLogHandler() {
        return this._userLogHandler;
    }
    set userLogHandler(val) {
        this._userLogHandler = val;
    }
    debug(...args) {
        this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);
        (() => {
            const __callInstance84 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._logHandler(this, LogLevel.DEBUG, ...args);
                    }
                }
            });
            const __exports = __callInstance84.exports;
            return __exports.data();
        })();
    }
    log(...args) {
        this._userLogHandler && this._userLogHandler(this, LogLevel.VERBOSE, ...args);
        (() => {
            const __callInstance83 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._logHandler(this, LogLevel.VERBOSE, ...args);
                    }
                }
            });
            const __exports = __callInstance83.exports;
            return __exports.data();
        })();
    }
    info(...args) {
        this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);
        (() => {
            const __callInstance82 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._logHandler(this, LogLevel.INFO, ...args);
                    }
                }
            });
            const __exports = __callInstance82.exports;
            return __exports.data();
        })();
    }
    warn(...args) {
        this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);
        (() => {
            const __callInstance81 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._logHandler(this, LogLevel.WARN, ...args);
                    }
                }
            });
            const __exports = __callInstance81.exports;
            return __exports.data();
        })();
    }
    error(...args) {
        this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);
        (() => {
            const __callInstance80 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._logHandler(this, LogLevel.ERROR, ...args);
                    }
                }
            });
            const __exports = __callInstance80.exports;
            return __exports.data();
        })();
    }
}
function setLogLevel$1(level) {
    (() => {
        const __callInstance79 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    instances.forEach(inst => {
                        (() => {
                            const __callInstance78 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        inst.setLogLevel(level);
                                    }
                                }
                            });
                            const __exports = __callInstance78.exports;
                            return __exports.data();
                        })();
                    });
                }
            }
        });
        const __exports = __callInstance79.exports;
        return __exports.data();
    })();
}
function setUserLogHandler(logCallback, options) {
    for (const instance of instances) {
        let customLogLevel = null;
        (() => {
            const __ifInstance26 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            customLogLevel = levelStringToEnum[options.level];
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance26.exports;
            return __exports.data(options && options.level ? 1 : 0);
        })();
        if (logCallback === null) {
            instance.userLogHandler = null;
        } else {
            instance.userLogHandler = (instance, level, ...args) => {
                const message = args.map(arg => {
                    if (arg == null) {
                        return null;
                    } else if (typeof arg === lS(0, 47)) {
                        return arg;
                    } else if (typeof arg === lS(0, 48) || typeof arg === lS(0, 49)) {
                        return arg.toString();
                    } else if (arg instanceof Error) {
                        return arg.message;
                    } else {
                        try {
                            return JSON.stringify(arg);
                        } catch (ignored) {
                            return null;
                        }
                    }
                }).filter(arg => arg).join(lS(0, 50));
                (() => {
                    const __ifInstance27 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    (() => {
                                        const __callInstance77 = new WebAssembly.Instance(__callWasmModule, {
                                            env: {
                                                impFunc: () => {
                                                    logCallback({
                                                        level: LogLevel[level].toLowerCase(),
                                                        message,
                                                        args,
                                                        type: instance.name
                                                    });
                                                }
                                            }
                                        });
                                        const __exports = __callInstance77.exports;
                                        return __exports.data();
                                    })();
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance27.exports;
                    return __exports.data(level >= (customLogLevel !== null && customLogLevel !== void 0 ? customLogLevel : instance.logLevel) ? 1 : 0);
                })();
            };
        }
    }
}
const instanceOfAny = (object, constructors) => constructors.some(c => object instanceof c);
let idbProxyableTypes;
let cursorAdvanceMethods;
function getIdbProxyableTypes() {
    return idbProxyableTypes || (idbProxyableTypes = [
        IDBDatabase,
        IDBObjectStore,
        IDBIndex,
        IDBCursor,
        IDBTransaction
    ]);
}
function getCursorAdvanceMethods() {
    return cursorAdvanceMethods || (cursorAdvanceMethods = [
        IDBCursor.prototype.advance,
        IDBCursor.prototype.continue,
        IDBCursor.prototype.continuePrimaryKey
    ]);
}
const cursorRequestMap = new WeakMap();
const transactionDoneMap = new WeakMap();
const transactionStoreNamesMap = new WeakMap();
const transformCache = new WeakMap();
const reverseTransformCache = new WeakMap();
function promisifyRequest(request) {
    const promise = new Promise((resolve, reject) => {
        const unlisten = () => {
            (() => {
                const __callInstance76 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            request.removeEventListener(lS(0, 51), success);
                        }
                    }
                });
                const __exports = __callInstance76.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance75 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            request.removeEventListener(lS(0, 52), error);
                        }
                    }
                });
                const __exports = __callInstance75.exports;
                return __exports.data();
            })();
        };
        const success = () => {
            (() => {
                const __callInstance74 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            resolve(wrap(request.result));
                        }
                    }
                });
                const __exports = __callInstance74.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance73 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            unlisten();
                        }
                    }
                });
                const __exports = __callInstance73.exports;
                return __exports.data();
            })();
        };
        const error = () => {
            (() => {
                const __callInstance72 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            reject(request.error);
                        }
                    }
                });
                const __exports = __callInstance72.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance71 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            unlisten();
                        }
                    }
                });
                const __exports = __callInstance71.exports;
                return __exports.data();
            })();
        };
        (() => {
            const __callInstance70 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        request.addEventListener(lS(0, 53), success);
                    }
                }
            });
            const __exports = __callInstance70.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance69 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        request.addEventListener(lS(0, 54), error);
                    }
                }
            });
            const __exports = __callInstance69.exports;
            return __exports.data();
        })();
    });
    (() => {
        const __callInstance68 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    promise.then(value => {
                        (() => {
                            const __ifInstance28 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            (() => {
                                                const __callInstance67 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            cursorRequestMap.set(value, request);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance67.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance28.exports;
                            return __exports.data(value instanceof IDBCursor ? 1 : 0);
                        })();
                    }).catch(() => {
                    });
                }
            }
        });
        const __exports = __callInstance68.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance66 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    reverseTransformCache.set(promise, request);
                }
            }
        });
        const __exports = __callInstance66.exports;
        return __exports.data();
    })();
    return promise;
}
function cacheDonePromiseForTransaction(tx) {
    if (transactionDoneMap.has(tx))
        return;
    const done = new Promise((resolve, reject) => {
        const unlisten = () => {
            (() => {
                const __callInstance65 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            tx.removeEventListener(lS(0, 55), complete);
                        }
                    }
                });
                const __exports = __callInstance65.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance64 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            tx.removeEventListener(lS(0, 56), error);
                        }
                    }
                });
                const __exports = __callInstance64.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance63 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            tx.removeEventListener(lS(0, 57), error);
                        }
                    }
                });
                const __exports = __callInstance63.exports;
                return __exports.data();
            })();
        };
        const complete = () => {
            (() => {
                const __callInstance62 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            resolve();
                        }
                    }
                });
                const __exports = __callInstance62.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance61 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            unlisten();
                        }
                    }
                });
                const __exports = __callInstance61.exports;
                return __exports.data();
            })();
        };
        const error = () => {
            (() => {
                const __callInstance60 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            reject(tx.error || new DOMException(lS(0, 58), lS(0, 59)));
                        }
                    }
                });
                const __exports = __callInstance60.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance59 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            unlisten();
                        }
                    }
                });
                const __exports = __callInstance59.exports;
                return __exports.data();
            })();
        };
        (() => {
            const __callInstance58 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        tx.addEventListener(lS(0, 60), complete);
                    }
                }
            });
            const __exports = __callInstance58.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance57 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        tx.addEventListener(lS(0, 61), error);
                    }
                }
            });
            const __exports = __callInstance57.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance56 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        tx.addEventListener(lS(0, 62), error);
                    }
                }
            });
            const __exports = __callInstance56.exports;
            return __exports.data();
        })();
    });
    (() => {
        const __callInstance55 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    transactionDoneMap.set(tx, done);
                }
            }
        });
        const __exports = __callInstance55.exports;
        return __exports.data();
    })();
}
let idbProxyTraps = {
    get(target, prop, receiver) {
        if (target instanceof IDBTransaction) {
            if (prop === lS(0, 63))
                return transactionDoneMap.get(target);
            if (prop === lS(0, 64)) {
                return target.objectStoreNames || transactionStoreNamesMap.get(target);
            }
            if (prop === lS(0, 65)) {
                return receiver.objectStoreNames[1] ? undefined : receiver.objectStore(receiver.objectStoreNames[0]);
            }
        }
        return wrap(target[prop]);
    },
    set(target, prop, value) {
        target[prop] = value;
        return true;
    },
    has(target, prop) {
        if (target instanceof IDBTransaction && (prop === lS(0, 66) || prop === lS(0, 67))) {
            return true;
        }
        return prop in target;
    }
};
function replaceTraps(callback) {
    idbProxyTraps = callback(idbProxyTraps);
}
function wrapFunction(func) {
    if (func === IDBDatabase.prototype.transaction && !(lS(0, 68) in IDBTransaction.prototype)) {
        return function (storeNames, ...args) {
            const tx = func.call(unwrap(this), storeNames, ...args);
            (() => {
                const __callInstance54 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);
                        }
                    }
                });
                const __exports = __callInstance54.exports;
                return __exports.data();
            })();
            return wrap(tx);
        };
    }
    if (getCursorAdvanceMethods().includes(func)) {
        return function (...args) {
            (() => {
                const __callInstance53 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            func.apply(unwrap(this), args);
                        }
                    }
                });
                const __exports = __callInstance53.exports;
                return __exports.data();
            })();
            return wrap(cursorRequestMap.get(this));
        };
    }
    return function (...args) {
        return wrap(func.apply(unwrap(this), args));
    };
}
function transformCachableValue(value) {
    if (typeof value === lS(0, 69))
        return wrapFunction(value);
    (() => {
        const __ifInstance29 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    (() => {
                        const __callInstance52 = new WebAssembly.Instance(__callWasmModule, {
                            env: {
                                impFunc: () => {
                                    cacheDonePromiseForTransaction(value);
                                }
                            }
                        });
                        const __exports = __callInstance52.exports;
                        return __exports.data();
                    })();
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance29.exports;
        return __exports.data(value instanceof IDBTransaction ? 1 : 0);
    })();
    if (instanceOfAny(value, getIdbProxyableTypes()))
        return new Proxy(value, idbProxyTraps);
    return value;
}
function wrap(value) {
    if (value instanceof IDBRequest)
        return promisifyRequest(value);
    if (transformCache.has(value))
        return transformCache.get(value);
    const newValue = transformCachableValue(value);
    (() => {
        const __ifInstance30 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance51 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        transformCache.set(value, newValue);
                                    }
                                }
                            });
                            const __exports = __callInstance51.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance50 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        reverseTransformCache.set(newValue, value);
                                    }
                                }
                            });
                            const __exports = __callInstance50.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance30.exports;
        return __exports.data(newValue !== value ? 1 : 0);
    })();
    return newValue;
}
const unwrap = value => reverseTransformCache.get(value);
function openDB(name, version, {blocked, upgrade, blocking, terminated} = {}) {
    const request = indexedDB.open(name, version);
    const openPromise = wrap(request);
    (() => {
        const __ifInstance31 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance49 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        request.addEventListener(lS(0, 70), event => {
                                            (() => {
                                                const __callInstance48 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance48.exports;
                                                return __exports.data();
                                            })();
                                        });
                                    }
                                }
                            });
                            const __exports = __callInstance49.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance31.exports;
        return __exports.data(upgrade ? 1 : 0);
    })();
    (() => {
        const __ifInstance32 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance47 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        request.addEventListener(lS(0, 71), event => blocked(event.oldVersion, event.newVersion, event));
                                    }
                                }
                            });
                            const __exports = __callInstance47.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance32.exports;
        return __exports.data(blocked ? 1 : 0);
    })();
    (() => {
        const __callInstance46 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    openPromise.then(db => {
                        (() => {
                            const __ifInstance33 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        (() => {
                                            const __callInstance45 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        db.addEventListener(lS(0, 72), () => terminated());
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance45.exports;
                                            return __exports.data();
                                        })();
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance33.exports;
                            return __exports.data(terminated ? 1 : 0);
                        })();
                        (() => {
                            const __ifInstance34 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            (() => {
                                                const __callInstance44 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            db.addEventListener(lS(0, 73), event => blocking(event.oldVersion, event.newVersion, event));
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance44.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance34.exports;
                            return __exports.data(blocking ? 1 : 0);
                        })();
                    }).catch(() => {
                    });
                }
            }
        });
        const __exports = __callInstance46.exports;
        return __exports.data();
    })();
    return openPromise;
}
const readMethods = [
    lS(0, 74),
    lS(0, 75),
    lS(0, 76),
    lS(0, 77),
    lS(0, 78)
];
const writeMethods = [
    lS(0, 79),
    lS(0, 80),
    lS(0, 81),
    lS(0, 82)
];
const cachedMethods = new Map();
function getMethod(target, prop) {
    if (!(target instanceof IDBDatabase && !(prop in target) && typeof prop === lS(0, 83))) {
        return;
    }
    if (cachedMethods.get(prop))
        return cachedMethods.get(prop);
    const targetFuncName = prop.replace(/FromIndex$/, lS(0, 84));
    const useIndex = prop !== targetFuncName;
    const isWrite = writeMethods.includes(targetFuncName);
    if (!(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) || !(isWrite || readMethods.includes(targetFuncName))) {
        return;
    }
    const method = async function (storeName, ...args) {
        const tx = this.transaction(storeName, isWrite ? lS(0, 85) : lS(0, 86));
        let target = tx.store;
        (() => {
            const __ifInstance35 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        target = target.index(args.shift());
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance35.exports;
            return __exports.data(useIndex ? 1 : 0);
        })();
        return (await Promise.all([
            target[targetFuncName](...args),
            isWrite && tx.done
        ]))[0];
    };
    (() => {
        const __callInstance43 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    cachedMethods.set(prop, method);
                }
            }
        });
        const __exports = __callInstance43.exports;
        return __exports.data();
    })();
    return method;
}
(() => {
    const __callInstance42 = new WebAssembly.Instance(__callWasmModule, {
        env: {
            impFunc: () => {
                replaceTraps(oldTraps => ({
                    ...oldTraps,
                    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),
                    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop)
                }));
            }
        }
    });
    const __exports = __callInstance42.exports;
    return __exports.data();
})();
class PlatformLoggerServiceImpl {
    constructor(container) {
        this.container = container;
    }
    getPlatformInfoString() {
        const providers = this.container.getProviders();
        return providers.map(provider => {
            if (isVersionServiceProvider(provider)) {
                const service = provider.getImmediate();
                return `${ service.library }/${ service.version }`;
            } else {
                return null;
            }
        }).filter(logString => logString).join(lS(0, 87));
    }
}
function isVersionServiceProvider(provider) {
    const component = provider.getComponent();
    return (component === null || component === void 0 ? void 0 : component.type) === lS(0, 88);
}
const name$o = lS(0, 89);
const version$1 = lS(0, 90);
const logger = new Logger(lS(0, 91));
const name$n = lS(0, 92);
const name$m = lS(0, 93);
const name$l = lS(0, 94);
const name$k = lS(0, 95);
const name$j = lS(0, 96);
const name$i = lS(0, 97);
const name$h = lS(0, 98);
const name$g = lS(0, 99);
const name$f = lS(0, 100);
const name$e = lS(0, 101);
const name$d = lS(0, 102);
const name$c = lS(0, 103);
const name$b = lS(0, 104);
const name$a = lS(0, 105);
const name$9 = lS(0, 106);
const name$8 = lS(0, 107);
const name$7 = lS(0, 108);
const name$6 = lS(0, 109);
const name$5 = lS(0, 110);
const name$4 = lS(0, 111);
const name$3 = lS(0, 112);
const name$2 = lS(0, 113);
const name$1 = lS(0, 114);
const name$p = lS(0, 115);
const version$2 = lS(0, 116);
const DEFAULT_ENTRY_NAME = lS(0, 117);
const PLATFORM_LOG_STRING = {
    [name$o]: 'fire-core',
    [name$n]: 'fire-core-compat',
    [name$l]: 'fire-analytics',
    [name$m]: 'fire-analytics-compat',
    [name$j]: 'fire-app-check',
    [name$k]: 'fire-app-check-compat',
    [name$i]: 'fire-auth',
    [name$h]: 'fire-auth-compat',
    [name$g]: 'fire-rtdb',
    [name$f]: 'fire-rtdb-compat',
    [name$e]: 'fire-fn',
    [name$d]: 'fire-fn-compat',
    [name$c]: 'fire-iid',
    [name$b]: 'fire-iid-compat',
    [name$a]: 'fire-fcm',
    [name$9]: 'fire-fcm-compat',
    [name$8]: 'fire-perf',
    [name$7]: 'fire-perf-compat',
    [name$6]: 'fire-rc',
    [name$5]: 'fire-rc-compat',
    [name$4]: 'fire-gcs',
    [name$3]: 'fire-gcs-compat',
    [name$2]: 'fire-fst',
    [name$1]: 'fire-fst-compat',
    'fire-js': 'fire-js',
    [name$p]: 'fire-js-all'
};
const _apps = new Map();
const _components = new Map();
function _addComponent(app, component) {
    try {
        (() => {
            const __callInstance41 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        app.container.addComponent(component);
                    }
                }
            });
            const __exports = __callInstance41.exports;
            return __exports.data();
        })();
    } catch (e) {
        (() => {
            const __callInstance40 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        logger.debug(`Component ${ component.name } failed to register with FirebaseApp ${ app.name }`, e);
                    }
                }
            });
            const __exports = __callInstance40.exports;
            return __exports.data();
        })();
    }
}
function _addOrOverwriteComponent(app, component) {
    (() => {
        const __callInstance39 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    app.container.addOrOverwriteComponent(component);
                }
            }
        });
        const __exports = __callInstance39.exports;
        return __exports.data();
    })();
}
function _registerComponent(component) {
    const componentName = component.name;
    if (_components.has(componentName)) {
        (() => {
            const __callInstance38 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        logger.debug(`There were multiple attempts to register component ${ componentName }.`);
                    }
                }
            });
            const __exports = __callInstance38.exports;
            return __exports.data();
        })();
        return false;
    }
    (() => {
        const __callInstance37 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    _components.set(componentName, component);
                }
            }
        });
        const __exports = __callInstance37.exports;
        return __exports.data();
    })();
    for (const app of _apps.values()) {
        (() => {
            const __callInstance36 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        _addComponent(app, component);
                    }
                }
            });
            const __exports = __callInstance36.exports;
            return __exports.data();
        })();
    }
    return true;
}
function _getProvider(app, name) {
    const heartbeatController = app.container.getProvider(lS(0, 118)).getImmediate({ optional: true });
    (() => {
        const __ifInstance36 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        void heartbeatController.triggerHeartbeat();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance36.exports;
        return __exports.data(heartbeatController ? 1 : 0);
    })();
    return app.container.getProvider(name);
}
function _removeServiceInstance(app, name, instanceIdentifier = DEFAULT_ENTRY_NAME) {
    (() => {
        const __callInstance35 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    _getProvider(app, name).clearInstance(instanceIdentifier);
                }
            }
        });
        const __exports = __callInstance35.exports;
        return __exports.data();
    })();
}
function _clearComponents() {
    (() => {
        const __callInstance34 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    _components.clear();
                }
            }
        });
        const __exports = __callInstance34.exports;
        return __exports.data();
    })();
}
const ERRORS = {
    ['no-app']: lS(0, 119) + lS(0, 120),
    ['bad-app-name']: 'Illegal App name: \'{$appName}',
    ['duplicate-app']: 'Firebase App named \'{$appName}\' already exists with different options or config',
    ['app-deleted']: 'Firebase App named \'{$appName}\' already deleted',
    ['no-options']: 'Need to provide options, when not being deployed to hosting via source.',
    ['invalid-app-argument']: lS(0, 121) + lS(0, 122),
    ['invalid-log-argument']: 'First argument to `onLog` must be null or a function.',
    ['idb-open']: 'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',
    ['idb-get']: 'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',
    ['idb-set']: 'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',
    ['idb-delete']: 'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.'
};
const ERROR_FACTORY = new ErrorFactory(lS(0, 123), lS(0, 124), ERRORS);
class FirebaseAppImpl {
    constructor(options, config, container) {
        this._isDeleted = false;
        this._options = Object.assign({}, options);
        this._config = Object.assign({}, config);
        this._name = config.name;
        this._automaticDataCollectionEnabled = config.automaticDataCollectionEnabled;
        this._container = container;
        (() => {
            const __callInstance33 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.container.addComponent(new Component(lS(0, 125), () => this, lS(0, 126)));
                    }
                }
            });
            const __exports = __callInstance33.exports;
            return __exports.data();
        })();
    }
    get automaticDataCollectionEnabled() {
        (() => {
            const __callInstance32 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.checkDestroyed();
                    }
                }
            });
            const __exports = __callInstance32.exports;
            return __exports.data();
        })();
        return this._automaticDataCollectionEnabled;
    }
    set automaticDataCollectionEnabled(val) {
        (() => {
            const __callInstance31 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.checkDestroyed();
                    }
                }
            });
            const __exports = __callInstance31.exports;
            return __exports.data();
        })();
        this._automaticDataCollectionEnabled = val;
    }
    get name() {
        (() => {
            const __callInstance30 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.checkDestroyed();
                    }
                }
            });
            const __exports = __callInstance30.exports;
            return __exports.data();
        })();
        return this._name;
    }
    get options() {
        (() => {
            const __callInstance29 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.checkDestroyed();
                    }
                }
            });
            const __exports = __callInstance29.exports;
            return __exports.data();
        })();
        return this._options;
    }
    get config() {
        (() => {
            const __callInstance28 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.checkDestroyed();
                    }
                }
            });
            const __exports = __callInstance28.exports;
            return __exports.data();
        })();
        return this._config;
    }
    get container() {
        return this._container;
    }
    get isDeleted() {
        return this._isDeleted;
    }
    set isDeleted(val) {
        this._isDeleted = val;
    }
    checkDestroyed() {
        if (this.isDeleted) {
            throw ERROR_FACTORY.create(lS(0, 127), { appName: this._name });
        }
    }
}
const SDK_VERSION = version$2;
function initializeApp(_options, rawConfig = {}) {
    let options = _options;
    (() => {
        const __ifInstance37 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        const name = rawConfig;
                        rawConfig = { name };
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance37.exports;
        return __exports.data(typeof rawConfig !== lS(0, 128) ? 1 : 0);
    })();
    const config = Object.assign({
        name: DEFAULT_ENTRY_NAME,
        automaticDataCollectionEnabled: false
    }, rawConfig);
    const name = config.name;
    if (typeof name !== lS(0, 129) || !name) {
        throw ERROR_FACTORY.create(lS(0, 130), { appName: String(name) });
    }
    options || (options = getDefaultAppConfig());
    if (!options) {
        throw ERROR_FACTORY.create(lS(0, 131));
    }
    const existingApp = _apps.get(name);
    if (existingApp) {
        if (deepEqual(options, existingApp.options) && deepEqual(config, existingApp.config)) {
            return existingApp;
        } else {
            throw ERROR_FACTORY.create(lS(0, 132), { appName: name });
        }
    }
    const container = new ComponentContainer(name);
    for (const component of _components.values()) {
        (() => {
            const __callInstance27 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        container.addComponent(component);
                    }
                }
            });
            const __exports = __callInstance27.exports;
            return __exports.data();
        })();
    }
    const newApp = new FirebaseAppImpl(options, config, container);
    (() => {
        const __callInstance26 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    _apps.set(name, newApp);
                }
            }
        });
        const __exports = __callInstance26.exports;
        return __exports.data();
    })();
    return newApp;
}
function getApp(name = DEFAULT_ENTRY_NAME) {
    const app = _apps.get(name);
    if (!app && name === DEFAULT_ENTRY_NAME && getDefaultAppConfig()) {
        return initializeApp();
    }
    if (!app) {
        throw ERROR_FACTORY.create(lS(0, 133), { appName: name });
    }
    return app;
}
function getApps() {
    return Array.from(_apps.values());
}
async function deleteApp(app) {
    const name = app.name;
    (() => {
        const __ifInstance38 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance25 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        _apps.delete(name);
                                    }
                                }
                            });
                            const __exports = __callInstance25.exports;
                            return __exports.data();
                        })();
                        await Promise.all(app.container.getProviders().map(provider => provider.delete()));
                        app.isDeleted = true;
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance38.exports;
        return __exports.data(_apps.has(name) ? 1 : 0);
    })();
}
function registerVersion(libraryKeyOrName, version, variant) {
    var _a;
    let library = (_a = PLATFORM_LOG_STRING[libraryKeyOrName]) !== null && _a !== void 0 ? _a : libraryKeyOrName;
    (() => {
        const __ifInstance39 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        library += `-${ variant }`;
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance39.exports;
        return __exports.data(variant ? 1 : 0);
    })();
    const libraryMismatch = library.match(/\s|\//);
    const versionMismatch = version.match(/\s|\//);
    if (libraryMismatch || versionMismatch) {
        const warning = [`Unable to register library "${ library }" with version "${ version }":`];
        (() => {
            const __ifInstance40 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance24 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            warning.push(`library name "${ library }" contains illegal characters (whitespace or "/")`);
                                        }
                                    }
                                });
                                const __exports = __callInstance24.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance40.exports;
            return __exports.data(libraryMismatch ? 1 : 0);
        })();
        (() => {
            const __ifInstance41 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            warning.push(lS(0, 134));
                                        }
                                    }
                                });
                                const __exports = __callInstance23.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance41.exports;
            return __exports.data(libraryMismatch && versionMismatch ? 1 : 0);
        })();
        (() => {
            const __ifInstance42 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            warning.push(`version name "${ version }" contains illegal characters (whitespace or "/")`);
                                        }
                                    }
                                });
                                const __exports = __callInstance22.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance42.exports;
            return __exports.data(versionMismatch ? 1 : 0);
        })();
        (() => {
            const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        logger.warn(warning.join(lS(0, 135)));
                    }
                }
            });
            const __exports = __callInstance21.exports;
            return __exports.data();
        })();
        return;
    }
    (() => {
        const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    _registerComponent(new Component(`${ library }-version`, () => ({
                        library,
                        version
                    }), lS(0, 136)));
                }
            }
        });
        const __exports = __callInstance20.exports;
        return __exports.data();
    })();
}
function onLog(logCallback, options) {
    if (logCallback !== null && typeof logCallback !== lS(0, 137)) {
        throw ERROR_FACTORY.create(lS(0, 138));
    }
    (() => {
        const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    setUserLogHandler(logCallback, options);
                }
            }
        });
        const __exports = __callInstance19.exports;
        return __exports.data();
    })();
}
function setLogLevel(logLevel) {
    (() => {
        const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    setLogLevel$1(logLevel);
                }
            }
        });
        const __exports = __callInstance18.exports;
        return __exports.data();
    })();
}
const DB_NAME = lS(0, 139);
const DB_VERSION = 1;
const STORE_NAME = lS(0, 140);
let dbPromise = null;
function getDbPromise() {
    if (!dbPromise) {
        dbPromise = openDB(DB_NAME, DB_VERSION, {
            upgrade: (db, oldVersion) => {
                switch (oldVersion) {
                case 0:
                    try {
                        (() => {
                            const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        db.createObjectStore(STORE_NAME);
                                    }
                                }
                            });
                            const __exports = __callInstance17.exports;
                            return __exports.data();
                        })();
                    } catch (e) {
                        (() => {
                            const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        console.warn(e);
                                    }
                                }
                            });
                            const __exports = __callInstance16.exports;
                            return __exports.data();
                        })();
                    }
                }
            }
        }).catch(e => {
            throw ERROR_FACTORY.create(lS(0, 141), { originalErrorMessage: e.message });
        });
    }
    return dbPromise;
}
async function readHeartbeatsFromIndexedDB(app) {
    try {
        const db = await getDbPromise();
        const tx = db.transaction(STORE_NAME);
        const result = await tx.objectStore(STORE_NAME).get(computeKey(app));
        await tx.done;
        return result;
    } catch (e) {
        (() => {
            const __ifInstance43 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            logger.warn(e.message);
                                        }
                                    }
                                });
                                const __exports = __callInstance15.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                        {
                            const idbGetError = ERROR_FACTORY.create(lS(0, 142), { originalErrorMessage: e === null || e === void 0 ? void 0 : e.message });
                            (() => {
                                const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            logger.warn(idbGetError.message);
                                        }
                                    }
                                });
                                const __exports = __callInstance14.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __ifInstance43.exports;
            return __exports.data(e instanceof FirebaseError ? 1 : 0);
        })();
    }
}
async function writeHeartbeatsToIndexedDB(app, heartbeatObject) {
    try {
        const db = await getDbPromise();
        const tx = db.transaction(STORE_NAME, lS(0, 143));
        const objectStore = tx.objectStore(STORE_NAME);
        await objectStore.put(heartbeatObject, computeKey(app));
        await tx.done;
    } catch (e) {
        (() => {
            const __ifInstance44 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            logger.warn(e.message);
                                        }
                                    }
                                });
                                const __exports = __callInstance13.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                        {
                            const idbGetError = ERROR_FACTORY.create(lS(0, 144), { originalErrorMessage: e === null || e === void 0 ? void 0 : e.message });
                            (() => {
                                const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            logger.warn(idbGetError.message);
                                        }
                                    }
                                });
                                const __exports = __callInstance12.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __ifInstance44.exports;
            return __exports.data(e instanceof FirebaseError ? 1 : 0);
        })();
    }
}
function computeKey(app) {
    return `${ app.name }!${ app.options.appId }`;
}
const MAX_HEADER_BYTES = 1024;
const STORED_HEARTBEAT_RETENTION_MAX_MILLIS = 30 * 24 * 60 * 60 * 1000;
class HeartbeatServiceImpl {
    constructor(container) {
        this.container = container;
        this._heartbeatsCache = null;
        const app = this.container.getProvider(lS(0, 145)).getImmediate();
        this._storage = new HeartbeatStorageImpl(app);
        this._heartbeatsCachePromise = this._storage.read().then(result => {
            this._heartbeatsCache = result;
            return result;
        });
    }
    async triggerHeartbeat() {
        var _a, _b;
        const platformLogger = this.container.getProvider(lS(0, 146)).getImmediate();
        const agent = platformLogger.getPlatformInfoString();
        const date = getUTCDateString();
        if (((_a = this._heartbeatsCache) === null || _a === void 0 ? void 0 : _a.heartbeats) == null) {
            this._heartbeatsCache = await this._heartbeatsCachePromise;
            if (((_b = this._heartbeatsCache) === null || _b === void 0 ? void 0 : _b.heartbeats) == null) {
                return;
            }
        }
        if (this._heartbeatsCache.lastSentHeartbeatDate === date || this._heartbeatsCache.heartbeats.some(singleDateHeartbeat => singleDateHeartbeat.date === date)) {
            return;
        } else {
            (() => {
                const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this._heartbeatsCache.heartbeats.push({
                                date,
                                agent
                            });
                        }
                    }
                });
                const __exports = __callInstance11.exports;
                return __exports.data();
            })();
        }
        this._heartbeatsCache.heartbeats = this._heartbeatsCache.heartbeats.filter(singleDateHeartbeat => {
            const hbTimestamp = new Date(singleDateHeartbeat.date).valueOf();
            const now = Date.now();
            return now - hbTimestamp <= STORED_HEARTBEAT_RETENTION_MAX_MILLIS;
        });
        return this._storage.overwrite(this._heartbeatsCache);
    }
    async getHeartbeatsHeader() {
        var _a;
        (() => {
            const __ifInstance45 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            await this._heartbeatsCachePromise;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance45.exports;
            return __exports.data(this._heartbeatsCache === null ? 1 : 0);
        })();
        if (((_a = this._heartbeatsCache) === null || _a === void 0 ? void 0 : _a.heartbeats) == null || this._heartbeatsCache.heartbeats.length === 0) {
            return lS(0, 147);
        }
        const date = getUTCDateString();
        const {heartbeatsToSend, unsentEntries} = extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats);
        const headerString = base64urlEncodeWithoutPadding(JSON.stringify({
            version: 2,
            heartbeats: heartbeatsToSend
        }));
        this._heartbeatsCache.lastSentHeartbeatDate = date;
        (() => {
            const __ifInstance46 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            this._heartbeatsCache.heartbeats = unsentEntries;
                            await this._storage.overwrite(this._heartbeatsCache);
                        }
                    },
                    impFunc2: () => {
                        {
                            this._heartbeatsCache.heartbeats = [];
                            void this._storage.overwrite(this._heartbeatsCache);
                        }
                    }
                }
            });
            const __exports = __ifInstance46.exports;
            return __exports.data(unsentEntries.length > 0 ? 1 : 0);
        })();
        return headerString;
    }
}
function getUTCDateString() {
    const today = new Date();
    return today.toISOString().substring(0, 10);
}
function extractHeartbeatsForHeader(heartbeatsCache, maxSize = MAX_HEADER_BYTES) {
    const heartbeatsToSend = [];
    let unsentEntries = heartbeatsCache.slice();
    for (const singleDateHeartbeat of heartbeatsCache) {
        const heartbeatEntry = heartbeatsToSend.find(hb => hb.agent === singleDateHeartbeat.agent);
        if (!heartbeatEntry) {
            (() => {
                const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            heartbeatsToSend.push({
                                agent: singleDateHeartbeat.agent,
                                dates: [singleDateHeartbeat.date]
                            });
                        }
                    }
                });
                const __exports = __callInstance10.exports;
                return __exports.data();
            })();
            if (countBytes(heartbeatsToSend) > maxSize) {
                (() => {
                    const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                heartbeatsToSend.pop();
                            }
                        }
                    });
                    const __exports = __callInstance9.exports;
                    return __exports.data();
                })();
                break;
            }
        } else {
            (() => {
                const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            heartbeatEntry.dates.push(singleDateHeartbeat.date);
                        }
                    }
                });
                const __exports = __callInstance8.exports;
                return __exports.data();
            })();
            if (countBytes(heartbeatsToSend) > maxSize) {
                (() => {
                    const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                heartbeatEntry.dates.pop();
                            }
                        }
                    });
                    const __exports = __callInstance7.exports;
                    return __exports.data();
                })();
                break;
            }
        }
        unsentEntries = unsentEntries.slice(1);
    }
    return {
        heartbeatsToSend,
        unsentEntries
    };
}
class HeartbeatStorageImpl {
    constructor(app) {
        this.app = app;
        this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();
    }
    async runIndexedDBEnvironmentCheck() {
        if (!isIndexedDBAvailable()) {
            return false;
        } else {
            return validateIndexedDBOpenable().then(() => true).catch(() => false);
        }
    }
    async read() {
        const canUseIndexedDB = await this._canUseIndexedDBPromise;
        if (!canUseIndexedDB) {
            return { heartbeats: [] };
        } else {
            const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);
            if (idbHeartbeatObject === null || idbHeartbeatObject === void 0 ? void 0 : idbHeartbeatObject.heartbeats) {
                return idbHeartbeatObject;
            } else {
                return { heartbeats: [] };
            }
        }
    }
    async overwrite(heartbeatsObject) {
        var _a;
        const canUseIndexedDB = await this._canUseIndexedDBPromise;
        if (!canUseIndexedDB) {
            return;
        } else {
            const existingHeartbeatsObject = await this.read();
            return writeHeartbeatsToIndexedDB(this.app, {
                lastSentHeartbeatDate: (_a = heartbeatsObject.lastSentHeartbeatDate) !== null && _a !== void 0 ? _a : existingHeartbeatsObject.lastSentHeartbeatDate,
                heartbeats: heartbeatsObject.heartbeats
            });
        }
    }
    async add(heartbeatsObject) {
        var _a;
        const canUseIndexedDB = await this._canUseIndexedDBPromise;
        if (!canUseIndexedDB) {
            return;
        } else {
            const existingHeartbeatsObject = await this.read();
            return writeHeartbeatsToIndexedDB(this.app, {
                lastSentHeartbeatDate: (_a = heartbeatsObject.lastSentHeartbeatDate) !== null && _a !== void 0 ? _a : existingHeartbeatsObject.lastSentHeartbeatDate,
                heartbeats: [
                    ...existingHeartbeatsObject.heartbeats,
                    ...heartbeatsObject.heartbeats
                ]
            });
        }
    }
}
function countBytes(heartbeatsCache) {
    return base64urlEncodeWithoutPadding(JSON.stringify({
        version: 2,
        heartbeats: heartbeatsCache
    })).length;
}
function registerCoreComponents(variant) {
    (() => {
        const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    _registerComponent(new Component(lS(0, 148), container => new PlatformLoggerServiceImpl(container), lS(0, 149)));
                }
            }
        });
        const __exports = __callInstance6.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    _registerComponent(new Component(lS(0, 150), container => new HeartbeatServiceImpl(container), lS(0, 151)));
                }
            }
        });
        const __exports = __callInstance5.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    registerVersion(name$o, version$1, variant);
                }
            }
        });
        const __exports = __callInstance4.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    registerVersion(name$o, version$1, lS(0, 152));
                }
            }
        });
        const __exports = __callInstance3.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    registerVersion(lS(0, 153), lS(0, 154));
                }
            }
        });
        const __exports = __callInstance2.exports;
        return __exports.data();
    })();
}
(() => {
    const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
        env: {
            impFunc: () => {
                registerCoreComponents(lS(0, 155));
            }
        }
    });
    const __exports = __callInstance1.exports;
    return __exports.data();
})();
var name = lS(0, 156);
var version = lS(0, 157);
(() => {
    const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
        env: {
            impFunc: () => {
                registerVersion(name, version, lS(0, 158));
            }
        }
    });
    const __exports = __callInstance0.exports;
    return __exports.data();
})();
export {
    FirebaseError,
    SDK_VERSION,
    DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME,
    _addComponent,
    _addOrOverwriteComponent,
    _apps,
    _clearComponents,
    _components,
    _getProvider,
    _registerComponent,
    _removeServiceInstance,
    deleteApp,
    getApp,
    getApps,
    initializeApp,
    onLog,
    registerVersion,
    setLogLevel
};</script>
</body>
</html>
