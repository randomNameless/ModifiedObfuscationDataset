<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>bmwusa-dealer-map-location-search.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __aB = 'AGFzbQEAAAABiYCAgAACYAAAYAJ/fwADg4CAgAACAQAFg4CAgAABAAEGhoCAgAABfwFBAAsHkYCAgAACBm1lbW9yeQIABGFycjAAAQq6gICAAAKPgICAAAAjACAAQQRsaiABNgIAC6CAgIAAAQF/QRAkAEEAQRsQAEEBQQ0QAEECQSgQAEEDQSYQAAs=', __wAM = new WebAssembly.Instance(new WebAssembly.Module((() => {
        try {
            let binary_string = atob(__aB), len = binary_string.length, bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binary_string.charCodeAt(i);
            }
            return bytes;
        } catch (err) {
            return new Uint8Array(global.Buffer.from(__aB, 'base64'));
        }
    })()));
const ac = new Map();
const __lA = (pos, stIdx, eIdx) => {
    if (ac.has(pos)) {
        return ac.get(pos);
    } else {
        const sK = `arr${ pos }`;
        __wAM.exports[sK]();
        let mem = new Uint32Array(__wAM.exports.memory.buffer, stIdx, (eIdx - stIdx) / 4 + 1);
        const rA = Array.from(mem);
        ac.set(pos, rA);
        return rA;
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABCAJgAABgAAF/AiQDA2hrdwRwYml4AAEDenFjBmhudnRzbQAAA3BtaAR3emhnAAADAgEABAUBcAAECQUDAQABBxECBm1lbW9yeQIABG5zdXkAAwkKAQBBAQsEAAMBAgoeARwAAkADQEEBEQEARQ0BQQQRAABBAxEAAAwACwsL';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABCAJgAABgAX8AAh8CA2Zlcwhzcmt6bXRqbAAAA29qYwhpZHd2a3JhcgAAAwIBAQQFAXAAAwgFAwEAAQcRAgZtZW1vcnkCAARlZGxxAAIJCQEAQQELAwACAQoOAQwAIAAEQBAABRABCws=';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABBAFgAAACDwEDenhzB3B6cGthc3AAAAMCAQAEBQFwAAIHBQMBAAEHEQIGbWVtb3J5AgAEaHplbAABCQgBAEEBCwIBAAoJAQcAQQIRAAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEGzYKAgAA4fwBBAQt/AEEMC38AQRQLfwBBPAt/AEHmAAt/AEHsAAt/AEH0AAt/AEH8AAt/AEGEAQt/AEGMAQt/AEGUAQt/AEGkAQt/AEGuAQt/AEHMAQt/AEHUAQt/AEHgAQt/AEHoAQt/AEH2AQt/AEGEAgt/AEGSAgt/AEGmAgt/AEGoAgt/AEG4Agt/AEG6Agt/AEG8Agt/AEHQAgt/AEHgAgt/AEHyAgt/AEGGAwt/AEGMAwt/AEGSAwt/AEGUAwt/AEGaAwt/AEGeAwt/AEGsAwt/AEG0Awt/AEG8Awt/AEHWAwt/AEHqAwt/AEHsAwt/AEHyAwt/AEH0Awt/AEH8Awt/AEGQBAt/AEGeBAt/AEGgBAt/AEG8BAt/AEHWBAt/AEHeBAt/AEHsBAt/AEHuBAt/AEH6BAt/AEGSBQt/AEGUBQt/AEGmBQt/AEHCBQsH+IOAgAA5Bm1lbW9yeQIABWRhdGEwAwAFZGF0YTEDAQVkYXRhMgMCBWRhdGEzAwMFZGF0YTQDBAVkYXRhNQMFBWRhdGE2AwYFZGF0YTcDBwVkYXRhOAMIBWRhdGE5AwkGZGF0YTEwAwoGZGF0YTExAwsGZGF0YTEyAwwGZGF0YTEzAw0GZGF0YTE0Aw4GZGF0YTE1Aw8GZGF0YTE2AxAGZGF0YTE3AxEGZGF0YTE4AxIGZGF0YTE5AxMGZGF0YTIwAxQGZGF0YTIxAxUGZGF0YTIyAxYGZGF0YTIzAxcGZGF0YTI0AxgGZGF0YTI1AxkGZGF0YTI2AxoGZGF0YTI3AxsGZGF0YTI4AxwGZGF0YTI5Ax0GZGF0YTMwAx4GZGF0YTMxAx8GZGF0YTMyAyAGZGF0YTMzAyEGZGF0YTM0AyIGZGF0YTM1AyMGZGF0YTM2AyQGZGF0YTM3AyUGZGF0YTM4AyYGZGF0YTM5AycGZGF0YTQwAygGZGF0YTQxAykGZGF0YTQyAyoGZGF0YTQzAysGZGF0YTQ0AywGZGF0YTQ1Ay0GZGF0YTQ2Ay4GZGF0YTQ3Ay8GZGF0YTQ4AzAGZGF0YTQ5AzEGZGF0YTUwAzIGZGF0YTUxAzMGZGF0YTUyAzQGZGF0YTUzAzUGZGF0YTU0AzYGZGF0YTU1AzcLxYeAgAA4AEEBCwkoY2l0aWVzKQAAQQwLBmlucHV0AABBFAsmaW5wdXQlNUJuYW1lJTNEJTIyZGVhbGVyLXNlYXJjaCUyMiU1RAAAQTwLKGlucHV0JTVCbmFtZSUzRCUyMmxvY2F0aW9uLXNlYXJjaCUyMiU1RAAAQeYACwRuYXYAAEHsAAsGY2xpY2sAAEH0AAsHc3VibWl0AABB/AALBmNsaWNrAABBhAELBmZvY3VzAABBjAELBmNsaWNrAABBlAELDnBsYWNlX2NoYW5nZWQAAEGkAQsJbG9jYWxpdHkAAEGuAQscYWRtaW5pc3RyYXRpdmVfYXJlYV9sZXZlbF8xAABBzAELByUyQyUyMAAAQdQBCwtzZWFyY2hDaXR5AABB4AELByUyQyUyMAAAQegBCw1sYXRMb25TZWFyY2gAAEH2AQsNbGF0TG9uU2VhcmNoAABBhAILDWxhdExvblNlYXJjaAAAQZICCxJtZWFzdXJlLmR0bS50cmFjawAAQaYCCwEAAEGoAgsObWFwLmNsb3NlLW1hcAAAQbgCCwEAAEG6AgsBAABBvAILE21hcC5zZXQtdHJhcC1mb2N1cwAAQdACCw5kZWFsZXItc2VhcmNoAABB4AILEGxvY2F0aW9uLXNlYXJjaAAAQfICCxJtZWFzdXJlLmR0bS50cmFjawAAQYYDCwVmb3JtAABBjAMLBWZvcm0AAEGSAwsBAABBlAMLBWRvd24AAEGaAwsDdXAAAEGeAwsNc2VhcmNoRGVhbGVyAABBrAMLBmVycm9yAABBtAMLB2J1dHRvbgAAQbwDCxltZWFzdXJlLmV2ZW50LmZpZWxkRXJyb3IAAEHWAwsSbWVhc3VyZS5kdG0udHJhY2sAAEHqAwsBAABB7AMLBU5hbWUAAEHyAwsBAABB9AMLB2J1dHRvbgAAQfwDCxJtZWFzdXJlLmR0bS50cmFjawAAQZAECw1zaW5nbGVEZWFsZXIAAEGeBAsBAABBoAQLGmRlYWxlcm1hcC5kZWFsZXItc2VsZWN0ZWQAAEG8BAsZZGVhbGVybWFwLnNlYXJjaC1yZXN1bHRzAABB1gQLByUyQyUyMAAAQd4ECw1sYXRMb25TZWFyY2gAAEHsBAsBAABB7gQLCnNlYXJjaFppcAAAQfoECxZtZWFzdXJlLnVzZXIubG9jYXRpb24AAEGSBQsBAABBlAULEGxvY2F0aW9uLXNlYXJjaAAAQaYFCxtkZWFsZXIucGFnaW5hdGlvbi1kaXNhYmxlZAAAQcIFCwVwcmV2AA=='].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
import { C as p } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/component.js';
import { u as c } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.js';
import {
    D as S,
    h as n,
    $ as d
} from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-measurement-data.js';
import { A as g } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/autocomplete-keyboard.js';
import { V as m } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/validator.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.esm.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/is-author.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/baseDomain.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/getbyourl.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/scroll-to.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/uid.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/zipcode.js';
new p({
    el: '.dealer-map-location-search',
    name: 'dealer-map-location-search Component',
    events: { 'keyup input': 'checkInput' },
    subscriptions: {
        'map.done': 'mapLoaded',
        'dealer.outside-click': 'closeAutocomplete',
        'dealermap.search-view': 'searchDisplayToggle',
        'dealermap.component-embedded': 'prefillDealerZip',
        'whereIWantForm.dealer.setGlobalFromForm': 'setFromForm'
    },
    total: 3,
    baseStr: 'dealer-map-location-search',
    mapIsLoaded: !1,
    autocompleteOptions: {
        types: [lS(0, 0)],
        componentRestrictions: { country: 'us' }
    },
    keyCodes: __lA(0, 16, 32),
    prevName: [],
    maxCount: 50,
    searchTerm: '',
    currentSearch: '',
    dtmSearchError: 'dtmDealerLocatorModalSearchError',
    dtmSearchSuccess: 'dtmDealerLocatorModalSearchSuccess',
    dtmSearchSuccessFromForm: 'DTM_AA_DealerLocatorFormZipSuccess',
    zipCodeCookieName: 'user_zipcode',
    beforeInit() {
        this.dealerSearch = new S(), this.autocompleteKeyboard = new g(), this.inputs = this.element.querySelectorAll(lS(0, 1)), this.dealerSearchInput = this.element.querySelector(lS(0, 2)), this.dealerLocationInput = this.element.querySelector(lS(0, 3)), this.dealerResultsHolder = this.dealerSearchInput.parentNode.querySelector(`${ this.el }__autocomplete`), this.dealerResultsHolderNav = this.dealerResultsHolder.querySelector(lS(0, 4)), this.submitBtn = this.element.querySelector(`${ this.el }__search-btn`), this.inputHolder = this.element.querySelectorAll(`${ this.el }__input-holder`), this.submitBtnStateChanged, this.searchResultsDealer = this.searchResultsDealer.bind(this), this.mapLoaded = this.mapLoaded.bind(this), this.autoFillSelected = this.autoFillSelected.bind(this), this.processSearch = this.processSearch.bind(this), this.dealerNameClick = this.dealerNameClick.bind(this), this.dealerLocationData = this.dealerLocationData.bind(this), this.dealerCityZipSearchResults = this.dealerCityZipSearchResults.bind(this), this.focusState = this.focusState.bind(this), this.macoData = this.macoData.bind(this), this.closeAutocomplete = this.closeAutocomplete.bind(this), this.toggleLoading = this.toggleLoading.bind(this), this.dealerResultsHolderNav.addEventListener(lS(0, 5), this.dealerNameClick), this.element.addEventListener(lS(0, 6), this.processSearch), this.submitBtn.addEventListener(lS(0, 7), this.processSearch), this.dealerLocationInput.addEventListener(lS(0, 8), this.focusState);
    },
    init() {
        (() => {
            let e = 0;
            const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return e < this.inputHolder.length ? 1 : 0;
                    },
                    update: () => {
                        e++;
                    },
                    body: () => {
                        (() => {
                            const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.inputHolder[e].addEventListener(lS(0, 9), this.cancelProp);
                                    }
                                }
                            });
                            const __exports = __callInstance15.exports;
                            return __exports.data();
                        })();
                    }
                }
            });
            const __exports = __forInstance0.exports;
            return __exports.data();
        })();
    },
    mapLoaded() {
        this.autocomplete = new google.maps.places.Autocomplete(this.dealerLocationInput, this.autocompleteOptions), this.autocomplete.addListener(lS(0, 10), this.autoFillSelected);
    },
    autoFillSelected() {
        let e, t, s;
        const a = this.autocomplete.getPlace(), i = !isNaN(name), r = m.validateZipCode(name);
        (() => {
            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.toggleLoading(!0);
                                        }
                                    }
                                });
                                const __exports = __callInstance14.exports;
                                return __exports.data();
                            })();
                            const {
                                address_components: h,
                                geometry: o,
                                name: f
                            } = a;
                            (() => {
                                const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                const {
                                                    lat: l,
                                                    lng: u
                                                } = o.location;
                                                e = {
                                                    Lat: l(),
                                                    Lon: u()
                                                };
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance1.exports;
                                return __exports.data((h.forEach(l => {
                                    l.types.indexOf(lS(0, 11)) > -1 && (t = l.long_name), l.types.indexOf(lS(0, 12)) > -1 && (s = l.short_name);
                                }), o) ? 1 : 0);
                            })();
                            t && s ? (this.searchTerm = t + lS(0, 13) + s, this.currentSearch = lS(0, 14), this.dealerSearch.searchCity({
                                state: s,
                                city: t
                            }, (l, u) => {
                                e = o ? e : !1, this.dealerCityZipSearchResults(l, u, e);
                            }, !0)) : o ? (this.searchTerm = e.Lat.toFixed(3) + lS(0, 15) + e.Lon.toFixed(3), this.currentSearch = lS(0, 16), this.dealerSearch.latLonSearch(e, this.dealerCityZipSearchResults, !0)) : this.toggleErrorState(this.dealerLocationInput, !0);
                        }
                    },
                    impFunc2: () => {
                        !i && !r && (this.toggleLoading(), this.toggleErrorState(this.dealerLocationInput, !0));
                    }
                }
            });
            const __exports = __ifInstance0.exports;
            return __exports.data(a && a.address_components ? 1 : 0);
        })();
    },
    dealerCityZipSearchResults(e, t, s = !1) {
        this.currentSearch != lS(0, 17) && this.toggleLoading(), e ? this.toggleErrorState(this.dealerLocationInput, !0) : (t.Results.length > 0 ? (this.toggleErrorState(this.dealerLocationInput), this.sendData(t)) : s ? (this.currentSearch = lS(0, 18), this.dealerSearch.latLonSearch(s, this.dealerCityZipSearchResults, !0)) : this.sendData({ Results: [] }), GlobalMessage(lS(0, 19), this.dtmSearchSuccess));
    },
    prefillDealerZip(e) {
        const t = n.getDealer();
        t && setTimeout(() => {
            this.dealerLocationInput.value = t.ZipCode, this.submitBtn.disabled = !1;
        }, 250);
    },
    cancelProp(e) {
        (() => {
            const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        e.stopImmediatePropagation();
                    }
                }
            });
            const __exports = __callInstance13.exports;
            return __exports.data();
        })();
    },
    checkInput(e) {
        switch (e.stopImmediatePropagation(), e.which === 27 && e.target.value === lS(0, 20) ? PubSub.publish(lS(0, 21)) : e.which === 27 && this.clearSearch(), e.target.value !== lS(0, 22) ? this.submitBtn.disabled = !1 : this.inputs.forEach(t => {
                e.target !== t && t.value === lS(0, 23) && (this.submitBtn.disabled = !0);
            }), this.submitBtnStateChanged !== this.submitBtn.disabled && (PubSub.publish(lS(0, 24)), this.submitBtnStateChanged = this.submitBtn.disabled), e.target.name) {
        case lS(0, 25):
            (() => {
                const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this.searchDealerName(e);
                        }
                    }
                });
                const __exports = __callInstance12.exports;
                return __exports.data();
            })();
            break;
        case lS(0, 26):
            (() => {
                const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this.locationSearch(e);
                        }
                    }
                });
                const __exports = __callInstance11.exports;
                return __exports.data();
            })();
            break;
        }
    },
    focusState(e) {
        (() => {
            const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.killResults();
                    }
                }
            });
            const __exports = __callInstance10.exports;
            return __exports.data();
        })();
    },
    locationSearch(e) {
        e.which === 13 && this.runValidator(e.target);
    },
    toggleLoading(e = !1) {
        const t = `${ this.baseStr }__search-btn--active`;
        e ? this.submitBtn.classList.add(t) : this.submitBtn.classList.remove(t);
    },
    dealerLocationData(e, t, s) {
        this.toggleLoading(), e ? this.toggleErrorState(this.dealerLocationInput, !0) : (t.Results.length > 0 ? (this.toggleErrorState(this.dealerLocationInput), this.sendData(t), c.cookies.verifyAndSet(!1, this.zipCodeCookieName, this.searchTerm)) : this.toggleErrorState(this.dealerLocationInput, !0), GlobalMessage(lS(0, 27), s === lS(0, 28) ? this.dtmSearchSuccessFromForm : this.dtmSearchSuccess));
    },
    setFromForm(e, t) {
        (() => {
            const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.dealerSearch.searchZip(t, this.dealerLocationData, !0, null, lS(0, 29));
                    }
                }
            });
            const __exports = __callInstance9.exports;
            return __exports.data();
        })();
    },
    typingTimer: null,
    doneTypingInterval: 250,
    searchDealerName(e) {
        const t = e.target, s = t.value, a = this.keyCodes.indexOf(e.which) > -1, i = s === lS(0, 30), r = this.isDealerResultsOpen();
        e.which === 13 && i && this.toggleErrorState(t, !0), i ? this.killResults() : a ? e.which === 13 && this.checkDealerData(t) : (clearTimeout(this.typingTimer), this.typingTimer = setTimeout(() => {
            (() => {
                const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this.doneTyping(s);
                        }
                    }
                });
                const __exports = __callInstance8.exports;
                return __exports.data();
            })();
        }, this.doneTypingInterval)), (r && e.which === 40 || e.which === 38) && (e.which === 40 ? this.setActiveDealerResults(lS(0, 31)) : this.setActiveDealerResults(lS(0, 32)));
    },
    doneTyping(e) {
        this.currentSearch = lS(0, 33), this.dealerSearch.searchDealer(e, this.searchResultsDealer);
    },
    searchResultsDealer(e, t) {
        e ? (this.toggleErrorState(this.dealerSearchInput, !0), this.debug(lS(0, 34), e)) : (this.dealerResults = t, this.dealerResults.length > 0 ? (this.toggleErrorState(this.dealerSearchInput), this.displayDealerResults()) : this.killResults());
    },
    setActiveDealerResults(e) {
        const t = this.dealerResultsHolder.querySelectorAll(lS(0, 35)), s = `${ this.baseStr }__autocomplete-item--active`, a = this.dealerResultsHolder.querySelector(`.${ s }`);
        (() => {
            const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.autocompleteKeyboard.runKeyboardHighlights({
                            max: t.length,
                            activeStr: s,
                            resultItems: t,
                            activeItem: a
                        }, e);
                    }
                }
            });
            const __exports = __callInstance7.exports;
            return __exports.data();
        })();
    },
    toggleErrorState(e, t = !1) {
        const s = e.parentNode, a = `${ this.baseStr }__input--error`;
        t ? (s.classList.add(`${ a }`), GlobalMessage(lS(0, 36), d.text(s).trim()), GlobalMessage(lS(0, 37), this.dtmSearchError)) : s.classList.remove(`${ a }`);
    },
    displayDealerResults() {
        let e = lS(0, 38);
        const t = `${ this.baseStr }__autocomplete--active`, s = this.dealerResults.slice(0, this.total), a = this.isDealerResultsOpen() ? c.matchArrayVal(this.prevName, s, lS(0, 39)) : !1, i = this.isDealerResultsOpen();
        !a && this.dealerSearchInput.value !== lS(0, 40) && (this.prevName = [], s.forEach(r => {
            const {Name: h} = r, o = h.length > this.maxCount ? `${ h.substring(0, this.maxCount) }...` : h;
            e += `<button
                        type="button"
                        name="${ o }"
                        class="${ this.baseStr }__autocomplete-item">
                      ${ o }
                    </button>`, this.prevName.push(h);
        }), this.dealerResultsHolderNav.innerHTML = e, i || this.dealerResultsHolder.classList.add(t), this.toggleErrorState(this.dealerSearchInput));
    },
    isDealerResultsOpen() {
        const e = `${ this.baseStr }__autocomplete--active`;
        return this.dealerResultsHolder.classList.contains(e);
    },
    checkDealerData(e) {
        (() => {
            const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        (() => {
                            const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.toggleErrorState(e, !0);
                                    }
                                }
                            });
                            const __exports = __callInstance6.exports;
                            return __exports.data();
                        })();
                    },
                    impFunc2: () => {
                        {
                            const s = this.dealerResultsHolder.querySelectorAll(lS(0, 41)), a = this.dealerResultsHolder.querySelector(`${ this.el }__autocomplete-item--active`);
                            let i = 0, r = s[i];
                            a && (i = d.elementIndex(a), r = s[i]), e.value = r.textContent.trim(), this.selectedDealership = this.dealerResults[i], this.macoSetup(this.selectedDealership);
                        }
                    }
                }
            });
            const __exports = __ifInstance2.exports;
            return __exports.data(!this.isDealerResultsOpen() ? 1 : 0);
        })();
    },
    dealerNameClick(e) {
        (() => {
            const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            const t = e.target, s = d.elementIndex(t);
                            this.selectedDealership = this.dealerResults[s], this.dealerSearchInput.value = t.textContent.trim(), this.macoSetup(this.selectedDealership), GlobalMessage(lS(0, 42), this.dtmSearchSuccess);
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance3.exports;
            return __exports.data(e.target && e.target.matches(`${ this.el }__autocomplete-item`) ? 1 : 0);
        })();
    },
    macoSetup(e) {
        const {
            ZipCode: t,
            Name: s
        } = e;
        this.searchTerm = s, this.closeAutocomplete(null), this.toggleLoading(!0), n.getMacoDataApi(c.CleanZip(t)).then(a => {
            (() => {
                const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this.macoData(a);
                        }
                    }
                });
                const __exports = __callInstance5.exports;
                return __exports.data();
            })();
        }).catch(a => {
            console.error(a), this.toggleErrorState(this.dealerSearchInput, !0);
        });
    },
    macoData(e) {
        this.toggleLoading(), this.setupDealerData({
            dealer: this.selectedDealership,
            maco: e
        });
    },
    setupDealerData(e) {
        this.currentSearch = lS(0, 43);
        const {
            dealer: t,
            maco: s
        } = e;
        (() => {
            const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.sendData({
                            Results: [t],
                            Maco: s
                        });
                    }
                }
            });
            const __exports = __callInstance4.exports;
            return __exports.data();
        })();
    },
    sendData(e) {
        n.setDealerList(e.Results), n.setMaco(e.Maco), this.clearSearch(), e.Term = this.searchTerm || lS(0, 44), this.toggleLoading(), PubSub.publish(lS(0, 45), {
            dealer: e.Results[0],
            maco: e.Maco,
            payload: e.Results
        }), e.currentSearch = this.currentSearch, PubSub.publish(lS(0, 46), e), this.searchDisplayToggle(null);
    },
    searchDisplayToggle(e, t = !1) {
        const s = `${ this.baseStr }--active`;
        (() => {
            const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        (() => {
                            const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            const a = {
                                                Lat: t.lat,
                                                Lon: t.lng
                                            };
                                            this.searchTerm = t.lat.toFixed(3) + lS(0, 47) + t.lng.toFixed(3), this.currentSearch = lS(0, 48), this.dealerSearch.latLonSearch(a, this.dealerCityZipSearchResults, !0);
                                        }
                                    },
                                    impFunc2: () => {
                                        (() => {
                                            const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        this.clearSearch();
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance3.exports;
                                            return __exports.data();
                                        })();
                                    }
                                }
                            });
                            const __exports = __ifInstance5.exports;
                            return __exports.data(t.lat && t.lng ? 1 : 0);
                        })();
                    },
                    impFunc2: () => {
                        (() => {
                            const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.element.classList.remove(s);
                                    }
                                }
                            });
                            const __exports = __callInstance2.exports;
                            return __exports.data();
                        })();
                    }
                }
            });
            const __exports = __ifInstance4.exports;
            return __exports.data(t ? 1 : 0);
        })();
    },
    clearSearch() {
        this.dealerResults = [], this.killResults();
        (() => {
            let e = 0;
            const __forInstance1 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return e < this.inputs.length ? 1 : 0;
                    },
                    update: () => {
                        e++;
                    },
                    body: () => {
                        this.inputs[e].value = lS(0, 49);
                    }
                }
            });
            const __exports = __forInstance1.exports;
            return __exports.data();
        })();
    },
    closeAutocomplete(e, t) {
        (() => {
            const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.killResults();
                    }
                }
            });
            const __exports = __callInstance1.exports;
            return __exports.data();
        })();
    },
    killResults() {
        this.autocompleteKeyboard.reset(), this.dealerResultsHolder.classList.remove(`${ this.baseStr }__autocomplete--active`);
    },
    runValidator(e, t = !0) {
        let s = e.value;
        const a = m.validateZipCode(s), i = !isNaN(s);
        a ? (s = c.CleanZip(s), this.toggleLoading(!0), this.searchTerm = s, this.currentSearch = lS(0, 50), this.dealerSearch.searchZip(s, this.dealerLocationData, !0), GlobalMessage(lS(0, 51), { zipCode: s })) : t && i ? this.toggleErrorState(this.dealerLocationInput, !0) : t || this.toggleErrorState(this.dealerLocationInput, !0);
    },
    processSearch(e) {
        (() => {
            const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        e.preventDefault();
                    }
                }
            });
            const __exports = __callInstance0.exports;
            return __exports.data();
        })();
        (() => {
            let t = 0;
            const __forInstance2 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return t < this.inputs.length ? 1 : 0;
                    },
                    update: () => {
                        t++;
                    },
                    body: () => {
                        {
                            const s = this.inputs[t], a = s.value, i = s.name;
                            a !== lS(0, 52) && (i === lS(0, 53) ? (this.runValidator(s, !1), PubSub.publish(lS(0, 54), lS(0, 55))) : this.toggleErrorState(s, !0));
                        }
                    }
                }
            });
            const __exports = __forInstance2.exports;
            return __exports.data();
        })();
    }
});</script>
</body>
</html>
